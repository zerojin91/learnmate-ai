<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LearningMate - ê°œì¸í™” í•™ìŠµ ë©˜í† </title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f9fafb;
            min-height: 100vh;
            display: flex;
        }

        /* ì‚¬ì´ë“œë°” */
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 20px rgba(0,0,0,0.1);
            position: fixed;
            height: 100vh;
            z-index: 100;
        }

        .logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo h1 {
            color: #4a5568;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .logo p {
            color: #718096;
            font-size: 14px;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 10px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: #4a5568;
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 500;
            cursor: pointer;
        }

        .nav-link i {
            margin-right: 12px;
            width: 20px;
        }

        .nav-link:hover, .nav-link.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: translateX(5px);
        }

        /* ë©”ì¸ ì»¨í…ì¸  */
        .main-content {
            flex: 1;
            margin-left: 280px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }

        /* ì›°ì»´ ì„¹ì…˜ */
        .welcome-section {
            text-align: center;
            max-width: 800px;
            margin-bottom: 40px;
        }

        .ai-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #a855f7, #ec4899);
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 32px rgba(168, 85, 247, 0.3);
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 10px;
        }

        .welcome-subtitle {
            font-size: 20px;
            color: #6b7280;
            margin-bottom: 5px;
        }

        .welcome-subtitle .highlight {
            background: linear-gradient(135deg, #a855f7, #ec4899);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 600;
        }

        /* ì±„íŒ… ì»¨í…Œì´ë„ˆ - ì˜ˆì‹œ ì¹´ë“œ 3ê°œ ë¶„ëŸ‰ */
        .chat-container {
            flex: 3;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.1);
            overflow: hidden;
            height: 450px;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: #ffffff;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
        }

        .user-avatar {
            background: #e5e7eb;
            color: #6b7280;
        }

        .ai-avatar-small {
            background: linear-gradient(135deg, #a855f7, #ec4899);
            color: white;
        }

        .message-content {
            flex: 1;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 15px;
            line-height: 1.5;
        }

        .user-message .message-content {
            background: #f3f4f6;
            color: #1f2937;
        }

        .ai-message .message-content {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            color: #374151;
            border-left: none !important;
        }
        
        .ai-message .message-content * {
            border-left: none !important;
            margin-left: 0 !important;
            padding-left: 0 !important;
        }

        /* ì…ë ¥ ì˜ì—­ */
        .input-container {
            padding: 30px;
            background: white;
            border-top: 1px solid #e5e7eb;
            flex-shrink: 0;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            transition: all 0.2s ease;
        }

        .input-wrapper:focus-within {
            border-color: #a855f7;
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
        }

        .message-input {
            flex: 1;
            padding: 16px 20px;
            border: none;
            background: transparent;
            font-size: 16px;
            outline: none;
            resize: none;
            min-height: 24px;
            max-height: 120px;
            font-family: inherit;
        }

        .input-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            padding-right: 12px;
        }

        .attach-button, .clear-button {
            padding: 8px;
            background: none;
            border: none;
            color: #6b7280;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .attach-button:hover, .clear-button:hover {
            background: #e5e7eb;
            color: #374151;
        }

        .clear-button:hover {
            color: #ef4444;
        }

        .send-button {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #a855f7, #ec4899);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .send-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* íŒŒì¼ ì…ë ¥ ìˆ¨ê¹€ */
        .file-input {
            display: none;
        }

        /* ì±„íŒ…ê³¼ í”„ë¡œí•„ ì˜ì—­ */
        .chat-with-profile {
            display: flex;
            width: 100%;
            max-width: 1200px;
            gap: 24px;
            align-items: flex-start;
            margin-bottom: 40px;
        }

        /* í”„ë¡œí•„ ì‚¬ì´ë“œë°” - ì˜ˆì‹œ ì¹´ë“œ 1ê°œ ë¶„ëŸ‰ */
        .profile-sidebar {
            flex: 1;
            min-width: 280px;
            max-width: 350px;
        }

        .profile-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            border: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            transition: height 0.3s ease;
        }

        /* ì»¤ë¦¬í˜ëŸ¼ ì„¹ì…˜ì´ í‘œì‹œë  ë•Œë§Œ ì±„íŒ…ì°½ ë†’ì´ì— ë§ì¶¤ */
        .profile-card.with-curriculum {
            height: 450px;
            overflow-y: auto;
        }

        .profile-card h3 {
            margin: 0 0 20px 0;
            font-size: 18px;
            font-weight: 600;
            color: #374151;
        }

        .profile-progress {
            display: flex;
            flex-direction: column;
        }

        /* ì»¤ë¦¬í˜ëŸ¼ ì„¹ì…˜ì´ ìˆì„ ë•ŒëŠ” í”„ë¡œí•„ ì§„í–‰ ìƒí™©ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ */
        .profile-card.with-curriculum .profile-progress {
            /* ê¸°ë³¸ ê°„ê²© ìœ ì§€ */
            display: flex;
            flex-direction: column;
        }

        .profile-step {
            display: flex;
            align-items: flex-start;
            position: relative;
            margin-bottom: 4px;
        }

        /* ì»¤ë¦¬í˜ëŸ¼ ì„¹ì…˜ì´ ìˆì„ ë•Œë„ ê¸°ë³¸ ê°„ê²© ìœ ì§€ */

        .step-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-right: 16px;
            z-index: 2;
        }

        .step-circle {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
        }

        .step-circle i {
            font-size: 12px;
            color: white;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .step-line {
            width: 2px;
            height: 32px;
            background: #d1d5db;
            margin-top: 6px;
            transition: background 0.3s ease;
        }

        .profile-step:last-child .step-line {
            display: none;
        }

        .step-content {
            flex: 1;
            padding: 2px 0 16px 0;
        }

        .step-label {
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            margin-bottom: 2px;
            line-height: 1.2;
        }

        .step-value {
            font-size: 14px;
            color: #9ca3af;
            font-weight: 400;
            line-height: 1.3;
            margin-top: 2px;
        }

        /* ì™„ë£Œëœ ë‹¨ê³„ ìŠ¤íƒ€ì¼ */
        .profile-step.completed .step-circle {
            background: #10b981;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .profile-step.completed .step-circle i {
            opacity: 1;
        }

        .profile-step.completed .step-line {
            background: #10b981;
        }

        .profile-step.completed .step-value {
            color: #374151;
            font-weight: 500;
        }

        .profile-step.completed .step-label {
            color: #374151;
        }

        /* ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ì„¹ì…˜ */
        .curriculum-section {
            margin-top: auto;
            padding-top: 20px;
            animation: slideIn 0.3s ease-out;
            flex-shrink: 0;
        }

        .curriculum-divider {
            height: 1px;
            background: linear-gradient(to right, transparent, #e5e7eb, transparent);
            margin: 0 0 20px 0;
        }

        .duration-selector {
            margin-bottom: 16px;
        }

        .duration-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
        }

        .duration-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            font-size: 14px;
            color: #374151;
            outline: none;
            transition: all 0.2s ease;
        }

        .duration-select:focus {
            border-color: #a855f7;
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
        }

        .generate-curriculum-btn {
            width: 100%;
            padding: 14px 20px;
            background: linear-gradient(135deg, #a855f7, #ec4899);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s ease;
        }

        .generate-curriculum-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(168, 85, 247, 0.3);
        }

        .generate-curriculum-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .generate-curriculum-btn i {
            font-size: 16px;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ëª¨ë‹¬ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* ì˜ˆì‹œ ì¹´ë“œ */
        .examples-section {
            width: 100%;
            max-width: 1200px;
            margin-top: 40px;
        }

        .examples-title {
            font-size: 16px;
            font-weight: 600;
            color: #6b7280;
            text-align: center;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .example-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .example-card:hover {
            border-color: #a855f7;
            box-shadow: 0 4px 16px rgba(168, 85, 247, 0.1);
            transform: translateY(-2px);
        }

        .example-icon {
            font-size: 20px;
            color: #a855f7;
            margin-bottom: 8px;
        }

        .example-title {
            font-size: 14px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .example-description {
            font-size: 12px;
            color: #6b7280;
            line-height: 1.4;
        }

        /* ì•Œë¦¼ ë©”ì‹œì§€ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            z-index: 1000;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.3s ease;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: static;
                padding: 20px;
            }
            
            .main-content {
                margin-left: 0;
                padding: 20px 15px;
            }
            
            .nav-menu {
                display: flex;
                overflow-x: auto;
                gap: 10px;
                padding-bottom: 10px;
            }
            
            .nav-item {
                margin-bottom: 0;
                white-space: nowrap;
            }

            .welcome-title {
                font-size: 24px;
            }

            .welcome-subtitle {
                font-size: 18px;
            }

            .examples-grid {
                grid-template-columns: 1fr 1fr;
                gap: 16px;
            }
            
            .chat-with-profile {
                gap: 16px;
                margin-bottom: 30px;
            }
        }

        @media (max-width: 480px) {
            .examples-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ì‚¬ì´ë“œë°” -->
    <div class="sidebar">
        <div class="logo">
            <h1>LearningMate</h1>
            <p>ê°œì¸í™” í•™ìŠµ ë©˜í† </p>
        </div>
        
        <ul class="nav-menu">
            <li class="nav-item">
                <a class="nav-link active" data-page="datasource">
                    <i class="fas fa-database"></i>
                    í•™ìŠµ ë°ì´í„° ì›ì²œ
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-page="chat">
                    <i class="fas fa-bullseye"></i>
                    ë§ì¶¤í˜• í•™ìŠµ ì¶”ì²œ
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-page="profile">
                    <i class="fas fa-robot"></i>
                    AI ë©˜í† 
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-page="curriculum">
                    <i class="fas fa-graduation-cap"></i>
                    ë‚˜ì˜ ì»¤ë¦¬í˜ëŸ¼
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-page="settings">
                    <i class="fas fa-cog"></i>
                    ì„¤ì •
                </a>
            </li>
        </ul>
    </div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="main-content">
        <!-- ì›°ì»´ ì„¹ì…˜ -->
        <div class="welcome-section">
            <div class="ai-avatar">
            </div>
            <h1 class="welcome-title">ì•ˆë…•í•˜ì„¸ìš”, <span id="userName">ì‹ ë¯¼ìˆ˜</span>ë‹˜</h1>
            <p class="welcome-subtitle" id="welcomeSubtitle">ì˜¤ëŠ˜ <span class="highlight">ë¬´ì—‡ì„</span> ë°°ìš°ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?</p>
        </div>

        <!-- ì±„íŒ…ê³¼ í”„ë¡œí•„ ì˜ì—­ -->
        <div class="chat-with-profile">
            <!-- ì±„íŒ… ì»¨í…Œì´ë„ˆ -->
            <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <div class="message ai-message">
                    <div class="message-avatar ai-avatar-small">AI</div>
                    <div class="message-content" id="initialMessage">
                        ì•ˆë…•í•˜ì„¸ìš”! LearningMate ì…ë‹ˆë‹¤.<br>ì–´ë–¤ ì£¼ì œì— ëŒ€í•´ ë°°ìš°ê³  ì‹¶ìœ¼ì‹ ì§€ ì•Œë ¤ì£¼ì‹œë©´ ë§ì¶¤í˜• í•™ìŠµ ê³„íšì„ í•¨ê»˜ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤!
                    </div>
                </div>
            </div>
            
            <div class="input-container">
                <div class="input-wrapper">
                    <textarea 
                        id="messageInput" 
                        class="message-input"
                        placeholder="AIì—ê²Œ ì§ˆë¬¸í•˜ê±°ë‚˜ ìš”ì²­ì„ ì…ë ¥í•˜ì„¸ìš”..."
                        rows="1"
                        onkeydown="handleKeyDown(event)"
                        oninput="adjustTextareaHeight(this)"
                    ></textarea>
                    <div class="input-actions">
                        <input type="file" id="fileInput" class="file-input" accept=".txt,.pdf,.doc,.docx">
                        <button class="clear-button" onclick="clearChat()" title="ëŒ€í™” ì´ˆê¸°í™”">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button id="sendButton" class="send-button" onclick="sendMessage()" title="ì „ì†¡">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- í•™ìŠµ í”„ë¡œí•„ ì¹´ë“œ -->
        <div class="profile-sidebar">
            <div class="profile-card">
                <h3>í•™ìŠµ í”„ë¡œí•„</h3>
                <div class="profile-progress">
                    <div class="profile-step" id="stepTopic">
                        <div class="step-indicator">
                            <div class="step-circle">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="step-line"></div>
                        </div>
                        <div class="step-content">
                            <div class="step-label">ì£¼ì œ</div>
                            <div id="profileTopic" class="step-value">ì„¤ì • í•„ìš”</div>
                        </div>
                    </div>
                    
                    <div class="profile-step" id="stepConstraints">
                        <div class="step-indicator">
                            <div class="step-circle">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="step-line"></div>
                        </div>
                        <div class="step-content">
                            <div class="step-label">ì¡°ê±´</div>
                            <div id="profileConstraints" class="step-value">ì„¤ì • í•„ìš”</div>
                        </div>
                    </div>
                    
                    <div class="profile-step" id="stepGoal">
                        <div class="step-indicator">
                            <div class="step-circle">
                                <i class="fas fa-check"></i>
                            </div>
                        </div>
                        <div class="step-content">
                            <div class="step-label">ëª©í‘œ</div>
                            <div id="profileGoal" class="step-value">ì„¤ì • í•„ìš”</div>
                        </div>
                    </div>
                </div>
                
                <!-- í•™ìŠµ ê¸°ê°„ ì„ íƒ ë° ì»¤ë¦¬í˜ëŸ¼ ìƒì„± -->
                <div id="curriculumSection" class="curriculum-section" style="display: none;">
                    <div class="curriculum-divider"></div>
                    
                    <div class="duration-selector">
                        <label for="learningDuration" class="duration-label">í•™ìŠµ ê¸°ê°„ ì„¤ì •</label>
                        <select id="learningDuration" class="duration-select">
                            <option value="1">1ê°œì›”</option>
                            <option value="2">2ê°œì›”</option>
                            <option value="3" selected>3ê°œì›”</option>
                            <option value="4">4ê°œì›”</option>
                            <option value="5">5ê°œì›”</option>
                            <option value="6">6ê°œì›”</option>
                        </select>
                    </div>
                    
                    <button id="generateCurriculumBtn" class="generate-curriculum-btn" onclick="generateCurriculum()">
                        <i class="fas fa-magic"></i>
                        ë§ì¶¤í˜• ì»¤ë¦¬í˜ëŸ¼ ìƒì„±
                    </button>
                </div>
            </div>
        </div>
        </div>

        <!-- ì˜ˆì‹œ ì„¹ì…˜ -->
        <div class="examples-section">
            <h3 class="examples-title">ì˜ˆì‹œë¡œ ì‹œì‘í•´ë³´ì„¸ìš”</h3>
            <div class="examples-grid">
                <div class="example-card" onclick="useExample('Python í”„ë¡œê·¸ë˜ë°ì„ ì²˜ìŒë¶€í„° ë°°ìš°ê³  ì‹¶ì–´ìš”')">
                    <div class="example-icon">
                        <i class="fab fa-python"></i>
                    </div>
                    <div class="example-title">í”„ë¡œê·¸ë˜ë° í•™ìŠµ</div>
                    <div class="example-description">Python ì²˜ìŒë¶€í„° ë°°ìš°ê¸°</div>
                </div>
                
                <div class="example-card" onclick="useExample('ì˜ì–´ íšŒí™” ì‹¤ë ¥ì„ í–¥ìƒì‹œí‚¤ê³  ì‹¶ìŠµë‹ˆë‹¤')">
                    <div class="example-icon">
                        <i class="fas fa-language"></i>
                    </div>
                    <div class="example-title">ì–¸ì–´ í•™ìŠµ</div>
                    <div class="example-description">ì˜ì–´ íšŒí™” í–¥ìƒ ê³„íš</div>
                </div>
                
                <div class="example-card" onclick="useExample('ë°ì´í„° ê³¼í•™ ê³µë¶€ ê³„íšì„ ì„¸ì›Œì£¼ì„¸ìš”')">
                    <div class="example-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="example-title">ë°ì´í„° ê³¼í•™</div>
                    <div class="example-description">ì²´ê³„ì ì¸ í•™ìŠµ ë¡œë“œë§µ</div>
                </div>
                
                <div class="example-card" onclick="useExample('AIì™€ ë¨¸ì‹ ëŸ¬ë‹ì— ëŒ€í•´ ì•Œê³  ì‹¶ì–´ìš”')">
                    <div class="example-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="example-title">AI/ML í•™ìŠµ</div>
                    <div class="example-description">ì¸ê³µì§€ëŠ¥ ê¸°ì´ˆë¶€í„°</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì•Œë¦¼ -->
    <div id="notification" class="notification"></div>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');

        // ì‚¬ìš©ì ì´ë¦„ ì„¤ì • (ì—¬ê¸°ì„œ ë³€ê²½í•˜ì„¸ìš”)
        const USER_NAME = "ì‹ ë¯¼ìˆ˜"; // ì›í•˜ëŠ” ì´ë¦„ìœ¼ë¡œ ë³€ê²½
        
        // ì„œë²„ì—ì„œ ì „ë‹¬ë°›ì€ ì„¸ì…˜ ID
        const SESSION_ID = "{{ session_id }}";
        console.log('ì„¸ì…˜ ID:', SESSION_ID);

        // ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ìƒíƒœ ì¶”ì 
        let isGeneratingCurriculum = false;

        // ì‚¬ìš©ì ì •ë³´ ê´€ë¦¬
        let currentUser = {
            name: USER_NAME,
            profile: {}
        };

        // ê°„ë‹¨í•œ ë§ˆí¬ë‹¤ìš´ í¬ë§·íŒ… í•¨ìˆ˜
        function formatSimpleMarkdown(text) {
            return text
                // **êµµì€ê¸€ì”¨** -> <strong>êµµì€ê¸€ì”¨</strong>
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                // ì¤„ë°”ê¿ˆ ì²˜ë¦¬
                .replace(/\n/g, '<br>')
                // ë¶ˆë¦¿ í¬ì¸íŠ¸ ì²˜ë¦¬
                .replace(/^- (.*$)/gim, 'â€¢ $1')
                .replace(/^\* (.*$)/gim, 'â€¢ $1');
        }

        // í•™ìŠµ í”„ë¡œí•„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateLearningProfile(topic, constraints, goal) {
            const profileTopic = document.getElementById('profileTopic');
            const profileConstraints = document.getElementById('profileConstraints');
            const profileGoal = document.getElementById('profileGoal');
            
            const stepTopic = document.getElementById('stepTopic');
            const stepConstraints = document.getElementById('stepConstraints');
            const stepGoal = document.getElementById('stepGoal');
            
            // ì£¼ì œ ì—…ë°ì´íŠ¸
            if (topic) {
                profileTopic.textContent = topic;
                stepTopic.classList.add('completed');
            } else {
                profileTopic.textContent = 'ì„¤ì • í•„ìš”';
                stepTopic.classList.remove('completed');
            }
            
            // ì¡°ê±´ ì—…ë°ì´íŠ¸
            if (constraints) {
                profileConstraints.textContent = constraints;
                stepConstraints.classList.add('completed');
            } else {
                profileConstraints.textContent = 'ì„¤ì • í•„ìš”';
                stepConstraints.classList.remove('completed');
            }
            
            // ëª©í‘œ ì—…ë°ì´íŠ¸
            if (goal) {
                profileGoal.textContent = goal;
                stepGoal.classList.add('completed');
            } else {
                profileGoal.textContent = 'ì„¤ì • í•„ìš”';
                stepGoal.classList.remove('completed');
            }

            // í”„ë¡œí•„ì´ ëª¨ë‘ ì™„ì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê³  ì»¤ë¦¬í˜ëŸ¼ ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
            const profileComplete = topic && constraints && goal;
            const curriculumSection = document.getElementById('curriculumSection');
            const profileCard = document.querySelector('.profile-card');
            
            if (profileComplete && curriculumSection) {
                curriculumSection.style.display = 'block';
                profileCard.classList.add('with-curriculum');
                console.log('âœ… í”„ë¡œí•„ ì™„ì„± - ì»¤ë¦¬í˜ëŸ¼ ì„¹ì…˜ í‘œì‹œ, ì¹´ë“œ ë†’ì´ ì¡°ì •');
            } else if (curriculumSection) {
                curriculumSection.style.display = 'none';
                profileCard.classList.remove('with-curriculum');
                console.log('âŒ í”„ë¡œí•„ ë¯¸ì™„ì„± - ì»¤ë¦¬í˜ëŸ¼ ì„¹ì…˜ ìˆ¨ê¹€, ì¹´ë“œ ê¸°ë³¸ ë†’ì´');
            }
        }

        // AI ì‘ë‹µì—ì„œ í”„ë¡œí•„ ì •ë³´ ì¶”ì¶œ ë° ì—…ë°ì´íŠ¸
        function extractAndUpdateProfile(message) {
            // Assessment ê´€ë ¨ ë©”ì‹œì§€ì—ì„œ í”„ë¡œí•„ ì •ë³´ ì¶”ì¶œ ì‹œë„
            if (message.includes('íŒŒì´ì¬ í•™ìŠµ ì¡°ê±´') || message.includes('íŒŒì´ì¬ í•™ìŠµ ëª©í‘œ') || message.includes('í•™ìŠµ í”„ë¡œí•„ ë¶„ì„ ì™„ë£Œ')) {
                // ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ì „ë‹¬ë°›ì•„ì•¼ í•˜ì§€ë§Œ, ì„ì‹œë¡œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©
                const profile = JSON.parse(localStorage.getItem('currentProfile') || '{}');
                if (profile.topic || profile.constraints || profile.goal) {
                    updateLearningProfile(profile.topic, profile.constraints, profile.goal);
                }
            }
        }

        // ì»¤ë¦¬í˜ëŸ¼ ìƒì„± í•¨ìˆ˜
        async function generateCurriculum() {
            const generateBtn = document.getElementById('generateCurriculumBtn');
            const durationSelect = document.getElementById('learningDuration');
            
            if (!generateBtn || !durationSelect) {
                console.error('ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const selectedDuration = durationSelect.value;
            console.log(`ğŸš€ ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ì‹œì‘ - ê¸°ê°„: ${selectedDuration}ê°œì›”`);
            
            // 1. ìƒì„± ìƒíƒœ ì‹œì‘
            isGeneratingCurriculum = true;
            
            // 2. ë¨¼ì € "ë‚˜ì˜ ì»¤ë¦¬í˜ëŸ¼" íƒ­ìœ¼ë¡œ ì´ë™
            switchToTab('curriculum');
            
            // 3. ë¡œë”© ìƒíƒœ í‘œì‹œ
            const curriculumContent = document.getElementById('curriculumContent');
            if (curriculumContent) {
                displayLoadingState(curriculumContent);
            }
            
            // 4. ë²„íŠ¼ ë¹„í™œì„±í™” ë° ë¡œë”© ìƒíƒœ
            generateBtn.disabled = true;
            generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ì¤‘...';
            
            try {
                // ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ìš”ì²­ ë©”ì‹œì§€ë¥¼ ì…ë ¥ í•„ë“œì— ì„¤ì •í•˜ê³  ì „ì†¡
                const curriculumMessage = `${selectedDuration}ê°œì›” í•™ìŠµ ê¸°ê°„ìœ¼ë¡œ ë§ì¶¤í˜• ì»¤ë¦¬í˜ëŸ¼ì„ ìƒì„±í•´ì£¼ì„¸ìš”.`;
                messageInput.value = curriculumMessage;
                
                // ì¼ë°˜ sendMessage í•¨ìˆ˜ í˜¸ì¶œ
                await sendMessage();
                
                // ì„ì‹œë¡œ í…ŒìŠ¤íŠ¸ìš© ì»¤ë¦¬í˜ëŸ¼ ë°ì´í„° ì €ì¥ (ì‹¤ì œë¡œëŠ” ì„œë²„ ì‘ë‹µì—ì„œ ê°€ì ¸ì˜¬ ì˜ˆì •)
                setTimeout(() => {
                    const testCurriculumData = {
                        "title": "ì „ì§€ì§€ì‹ Learning Path",
                        "level": "beginner", 
                        "duration_weeks": 12,
                        "modules": [
                            {
                                "week": 1,
                                "title": "ì „ì§€ì§€ì‹ì˜ ê¸°ì´ˆ ê°œë… ì´í•´í•˜ê¸°",
                                "description": "ì „ì§€ê°€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ê³  ê¸°ë³¸ì ì¸ ë¬¼ë¦¬í•™ì  ì›ë¦¬ì™€ ì—ë„ˆì§€ ì €ì¥ ë©”ì»¤ë‹ˆì¦˜ì„ í†µí•´ ì „ì§€ì§€ì‹ì´ ìš°ë¦¬ ìƒí™œì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ í•™ìŠµí•©ë‹ˆë‹¤.",
                                "objectives": [
                                    "ì „ê¸°ì™€ ìê¸°ì˜ ê¸°ë³¸ ê°œë…ì„ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤",
                                    "ë°°í„°ë¦¬ì˜ ì‘ë™ ì›ë¦¬ë¥¼ ì´í•´í•  ìˆ˜ ìˆë‹¤",
                                    "ì „ì§€ì§€ì‹ì˜ í˜„ëŒ€ì  í™œìš© ì‚¬ë¡€ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["ì „ìê¸° ìœ ë„", "ì‚°í™”í™˜ì› ë°˜ì‘", "ì „ì••ê³¼ ì „ë¥˜ì˜ ê´€ê³„"],
                                "estimated_hours": 10,
                                "resources": {
                                    "videos": [
                                        {"title": "ì „ê¸°ê¸°ì´ˆ ì´ë¡ ", "url": "https://kmooc.kr/courses/course-123"},
                                        {"title": "ë°°í„°ë¦¬ ì›ë¦¬ ì„¤ëª…", "url": "https://kmooc.kr/courses/course-124"}
                                    ],
                                    "web_links": [
                                        {"title": "ì „ìê¸°í•™ ê¸°ì´ˆ", "url": "https://physics.stackexchange.com/basics"},
                                        {"title": "ì „ì§€ ê¸°ìˆ  ê°œë¡ ", "url": "https://batteryuniversity.com/basics"}
                                    ],
                                    "documents": [
                                        {"title": "ì „ê¸°íšŒë¡œ ì…ë¬¸ì„œ.pdf", "url": "/docs/electric-circuits-101.pdf"},
                                        {"title": "ë°°í„°ë¦¬ ê¸°ìˆ  ê°€ì´ë“œ.pdf", "url": "/docs/battery-tech-guide.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 2,
                                "title": "ì¼ìƒìƒí™œ ì† ì „ì§€ê¸°ê¸° ë¶„ì„",
                                "description": "ìŠ¤ë§ˆíŠ¸í°, ë…¸íŠ¸ë¶, ì „ê¸°ì°¨ ë“± ì¼ìƒìƒí™œì—ì„œ ì‚¬ìš©í•˜ëŠ” ì „ìê¸°ê¸°ë“¤ì— ì ìš©ëœ ì „ì§€ ê¸°ìˆ ì„ ë¶„ì„í•˜ê³  ê° ê¸°ê¸°ë³„ ì—ë„ˆì§€ íš¨ìœ¨ì„±ì„ ë¹„êµí•©ë‹ˆë‹¤.",
                                "objectives": [
                                    "ë‹¤ì–‘í•œ ì „ê¸°ê¸°ê¸°ì˜ ë°°í„°ë¦¬ êµ¬ì„±ì„ ë¶„ì„í•  ìˆ˜ ìˆë‹¤",
                                    "ì—ë„ˆì§€ íš¨ìœ¨ ì¸¡ì • ë°©ë²•ì„ ì´í•´í•  ìˆ˜ ìˆë‹¤",
                                    "ì¹œí™˜ê²½ ì „ì§€ê¸°ê¸° ì„ íƒ ê¸°ì¤€ì„ ì œì‹œí•  ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["ë¦¬íŠ¬ì´ì˜¨ ë°°í„°ë¦¬", "ì—ë„ˆì§€ ë°€ë„", "ì¬ìƒ ì—ë„ˆì§€"],
                                "estimated_hours": 12,
                                "resources": {
                                    "videos": [
                                        {"title": "ë¦¬íŠ¬ì´ì˜¨ ë°°í„°ë¦¬ ë¶„ì„", "url": "https://kmooc.kr/courses/course-125"},
                                        {"title": "ì „ê¸°ì°¨ ë°°í„°ë¦¬ ê¸°ìˆ ", "url": "https://kmooc.kr/courses/course-126"}
                                    ],
                                    "web_links": [
                                        {"title": "ë°°í„°ë¦¬ íš¨ìœ¨ì„± ê°€ì´ë“œ", "url": "https://energyefficiency.org/battery"},
                                        {"title": "ì¹œí™˜ê²½ ë°°í„°ë¦¬ ì„ íƒë²•", "url": "https://greenenergy.org/battery-guide"}
                                    ],
                                    "documents": [
                                        {"title": "ì—ë„ˆì§€ íš¨ìœ¨ ì¸¡ì •ë²•.pdf", "url": "/docs/energy-efficiency-measurement.pdf"},
                                        {"title": "ì¹œí™˜ê²½ ë°°í„°ë¦¬ ê¸°ìˆ .pdf", "url": "/docs/green-battery-tech.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 3,
                                "title": "ì „ì§€ì§€ì‹ í–¥ìƒì„ ìœ„í•œ ê°œì¸ í•™ìŠµ ê³„íš ìˆ˜ë¦½",
                                "description": "ìì‹ ì˜ í˜„ì¬ ì „ì§€ê¸°ì‹ ìˆ˜ì¤€ì„ ì§„ë‹¨í•˜ê³  í–¥í›„ 6ê°œì›” ë™ì•ˆì˜ ê°œì¸ í”„ë¡œì íŠ¸ì™€ ìê¸°ê°œë°œ ëª©í‘œë¥¼ ì„¤ì •í•˜ì—¬ ì²´ê³„ì ì¸ í•™ìŠµ ë¡œë“œë§µì„ ì‘ì„±í•©ë‹ˆë‹¤.",
                                "objectives": [
                                    "ìê¸°ì§„ë‹¨ ë„êµ¬ë¥¼ í™œìš©í•´ ìì‹ ì˜ ì§€ì‹ìˆ˜ì¤€ì„ í‰ê°€í•  ìˆ˜ ìˆë‹¤",
                                    "ê°œì¸ ë§ì¶¤í˜• í•™ìŠµ ê³„íšì„ ìˆ˜ë¦½í•  ìˆ˜ ìˆë‹¤",
                                    "ì‹¤í˜„ ê°€ëŠ¥í•œ ë‹¨ê³„ë³„ ëª©í‘œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["SMART ëª©í‘œì„¤ì •", "í•™ìŠµ ì§„ë„ ê´€ë¦¬", "ì§€ì‹ ìŠµë“"],
                                "estimated_hours": 15,
                                "resources": {
                                    "videos": [
                                        {"title": "íš¨ê³¼ì ì¸ í•™ìŠµê³„íš ìˆ˜ë¦½", "url": "https://kmooc.kr/courses/course-127"},
                                        {"title": "ìê¸°ì£¼ë„ í•™ìŠµë²•", "url": "https://kmooc.kr/courses/course-128"}
                                    ],
                                    "web_links": [
                                        {"title": "SMART ëª©í‘œì„¤ì • ê°€ì´ë“œ", "url": "https://smartgoals.org/guide"},
                                        {"title": "í•™ìŠµ ì§„ë„ ê´€ë¦¬ ë„êµ¬", "url": "https://studytracker.com/tools"}
                                    ],
                                    "documents": [
                                        {"title": "ê°œì¸ í•™ìŠµ ê³„íš í…œí”Œë¦¿.pdf", "url": "/docs/personal-study-plan-template.pdf"},
                                        {"title": "ëª©í‘œì„¤ì • ì›Œí¬ì‹œíŠ¸.pdf", "url": "/docs/goal-setting-worksheet.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 4,
                                "title": "ê°œì¸ ì „ì§€ê¸°ê¸° í”„ë¡œì íŠ¸ ê¸°íš",
                                "description": "ì¼ìƒìƒí™œì—ì„œ ë°œê²¬í•œ ë¶ˆí¸í•¨ì„ í•´ê²°í•  ìˆ˜ ìˆëŠ” ì†Œí˜• ì „ì§€ ê´€ë ¨ DIY í”„ë¡œì íŠ¸ë¥¼ êµ¬ìƒí•˜ê³  í•„ìš”í•œ ê¸°ìˆ  ìš”ì†Œë“¤ì„ ë¶„ì„í•©ë‹ˆë‹¤.",
                                "objectives": [
                                    "ì•„ì´ë””ì–´ ë°œìƒ ê¸°ë²•ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤",
                                    "í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ì„ ë¬¸ì„œí™”í•  ìˆ˜ ìˆë‹¤",
                                    "í•„ìš”í•œ ë¶€í’ˆê³¼ ì¬ë£Œë¥¼ ì„ ì •í•  ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["ë””ìì¸ ì”½í‚¹", "í”„ë¡œí† íƒ€ì´í•‘", "íšŒë¡œ ì„¤ê³„"],
                                "estimated_hours": 12,
                                "resources": {
                                    "videos": [
                                        {"title": "DIY ì „ìì œí’ˆ ë§Œë“¤ê¸°", "url": "https://kmooc.kr/courses/course-129"},
                                        {"title": "íšŒë¡œ ì„¤ê³„ ê¸°ì´ˆ", "url": "https://kmooc.kr/courses/course-130"}
                                    ],
                                    "web_links": [
                                        {"title": "Arduino í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´", "url": "https://arduino.cc/projects"},
                                        {"title": "ì „ìë¶€í’ˆ êµ¬ë§¤ ê°€ì´ë“œ", "url": "https://electronics-parts.com/guide"}
                                    ],
                                    "documents": [
                                        {"title": "í”„ë¡œì íŠ¸ ê¸°íšì„œ ì–‘ì‹.pdf", "url": "/docs/project-proposal-template.pdf"},
                                        {"title": "íšŒë¡œ ì„¤ê³„ ê°€ì´ë“œ.pdf", "url": "/docs/circuit-design-guide.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 5,
                                "title": "ê¸°ì´ˆ íšŒë¡œ ì œì‘ ì‹¤ìŠµ",
                                "description": "ê°„ë‹¨í•œ ì „ì§€ ê´€ë ¨ íšŒë¡œë¥¼ ì§ì ‘ ì œì‘í•´ë³´ê³  ì¸¡ì •ëœ ë°ì´í„°ë¥¼ í†µí•´ ì´ë¡ ê³¼ ì‹¤ì œì˜ ì°¨ì´ë¥¼ ë¶„ì„í•˜ëŠ” ê¸°ì´ˆ ì‹¤ìŠµì„ ì§„í–‰í•©ë‹ˆë‹¤.",
                                "objectives": [
                                    "ë¸Œë ˆë“œë³´ë“œë¥¼ í™œìš©í•œ íšŒë¡œ êµ¬ì„±ì´ ê°€ëŠ¥í•˜ë‹¤",
                                    "ë©€í‹°ë¯¸í„° ì‚¬ìš©ë²•ì„ ìµí ìˆ˜ ìˆë‹¤",
                                    "ê¸°ë³¸ ì „ì ë¶€í’ˆì˜ ì—­í• ì„ ì´í•´í•  ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["ì €í•­, ì»¤íŒ¨ì‹œí„°", "ì „ì•• ê°•í•˜", "ì•ˆì „ ìˆ˜ì¹™"],
                                "estimated_hours": 15,
                                "resources": {
                                    "videos": [
                                        {"title": "ë¸Œë ˆë“œë³´ë“œ ì‚¬ìš©ë²•", "url": "https://kmooc.kr/courses/course-131"},
                                        {"title": "ë©€í‹°ë¯¸í„° í™œìš© ì‹¤ìŠµ", "url": "https://kmooc.kr/courses/course-132"}
                                    ],
                                    "web_links": [
                                        {"title": "ì „ìë¶€í’ˆ ì‚¬ìš©ë²•", "url": "https://electronics.howstuffworks.com/components"},
                                        {"title": "íšŒë¡œ ì‹¤ìŠµ ê°€ì´ë“œ", "url": "https://circuitlab.com/tutorials"}
                                    ],
                                    "documents": [
                                        {"title": "ì‹¤ìŠµ ì•ˆì „ ìˆ˜ì¹™.pdf", "url": "/docs/lab-safety-rules.pdf"},
                                        {"title": "íšŒë¡œ ì‹¤ìŠµ ë§¤ë‰´ì–¼.pdf", "url": "/docs/circuit-lab-manual.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 6,
                                "title": "ê°œì¸ í”„ë¡œì íŠ¸ êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸",
                                "description": "5ì£¼ì°¨ì— ê¸°íší•œ ê°œì¸ í”„ë¡œì íŠ¸ë¥¼ ì‹¤ì œë¡œ êµ¬í˜„í•˜ê³  ì‹¤í—˜ì„ í†µí•´ ì„±ëŠ¥ì„ ê²€ì¦í•˜ë©° ê°œì„ ì ì„ ë„ì¶œí•©ë‹ˆë‹¤.",
                                "objectives": [
                                    "íšŒë¡œ ì„¤ê³„ ë„ë©´ì„ ì‘ì„±í•  ìˆ˜ ìˆë‹¤",
                                    "ì‹¤ì œ ì œì‘ ê³¼ì •ì—ì„œ ë¬¸ì œ í•´ê²°ì´ ê°€ëŠ¥í•˜ë‹¤",
                                    "í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ë¶„ì„í•˜ê³  ê°œì„ ë°©ì•ˆì„ ì œì‹œí•  ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["íšŒë¡œ ì‹œë®¬ë ˆì´ì…˜", "ì˜¤ë¥˜ ì§„ë‹¨", "ì„±ëŠ¥ ìµœì í™”"],
                                "estimated_hours": 20,
                                "resources": {
                                    "videos": [
                                        {"title": "í”„ë¡œì íŠ¸ êµ¬í˜„ ê³¼ì •", "url": "https://kmooc.kr/courses/course-133"},
                                        {"title": "íšŒë¡œ í…ŒìŠ¤íŠ¸ ë°©ë²•", "url": "https://kmooc.kr/courses/course-134"}
                                    ],
                                    "web_links": [
                                        {"title": "íšŒë¡œ ì‹œë®¬ë ˆì´ì…˜ ë„êµ¬", "url": "https://circuitsimulator.org"},
                                        {"title": "ë””ë²„ê¹… ê¸°ë²• ê°€ì´ë“œ", "url": "https://debugging-electronics.com/techniques"}
                                    ],
                                    "documents": [
                                        {"title": "í”„ë¡œì íŠ¸ ë³´ê³ ì„œ ì–‘ì‹.pdf", "url": "/docs/project-report-template.pdf"},
                                        {"title": "ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸.pdf", "url": "/docs/performance-test-checklist.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 7,
                                "title": "ì „ì§€ê¸°ì‹ ê³µìœ  ì»¤ë®¤ë‹ˆí‹° í™œìš©",
                                "description": "ì˜¨ë¼ì¸ ì „ì§€ì§€ì‹ ê³µìœ  í”Œë«í¼ì„ í™œìš©í•˜ì—¬ í•™ìŠµ ê²½í—˜ì„ ê³µìœ í•˜ê³  ë‹¤ë¥¸ í•™ìŠµìì˜ í”„ë¡œì íŠ¸ë¥¼ ë¶„ì„í•˜ë©° ë„¤íŠ¸ì›Œí‚¹ ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.",
                                "objectives": [
                                    "ì§€ì‹ê³µìœ  í”Œë«í¼ ì‚¬ìš©ë²•ì„ ìµí ìˆ˜ ìˆë‹¤",
                                    "íš¨ê³¼ì ì¸ í”¼ë“œë°± ì œê³µê³¼ ìˆ˜ìš©ì´ ê°€ëŠ¥í•˜ë‹¤",
                                    "í•™ìŠµ ë„¤íŠ¸ì›Œí¬ êµ¬ì¶• ë°©ë²•ì„ ì´í•´í•  ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["ì˜¨ë¼ì¸ í˜‘ì—…", "ì»¤ë®¤ë‹ˆí‹° ê°€ì´ë“œë¼ì¸", "ì§€ì‹ ì „íŒŒ"],
                                "estimated_hours": 10,
                                "resources": {
                                    "videos": [
                                        {"title": "ì˜¨ë¼ì¸ í•™ìŠµ ì»¤ë®¤ë‹ˆí‹° í™œìš©", "url": "https://kmooc.kr/courses/course-135"},
                                        {"title": "ì§€ì‹ê³µìœ  í”Œë«í¼ ì‚¬ìš©ë²•", "url": "https://kmooc.kr/courses/course-136"}
                                    ],
                                    "web_links": [
                                        {"title": "ì „ë¬¸ê°€ ë„¤íŠ¸ì›Œí‚¹ ê°€ì´ë“œ", "url": "https://networking.org/professionals"},
                                        {"title": "ì˜¨ë¼ì¸ í˜‘ì—… ë„êµ¬", "url": "https://collaboration-tools.com/online"}
                                    ],
                                    "documents": [
                                        {"title": "ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬ ê°€ì´ë“œ.pdf", "url": "/docs/community-participation-guide.pdf"},
                                        {"title": "íš¨ê³¼ì ì¸ í”¼ë“œë°± ë°©ë²•.pdf", "url": "/docs/effective-feedback-methods.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 8,
                                "title": "ì „ë¬¸ ìë£Œ í™œìš© ëŠ¥ë ¥ ê°œë°œ",
                                "description": "ë…¼ë¬¸, ê¸°ìˆ  ë¬¸ì„œ ë“± ì „ë¬¸ì  ì „ì§€ê¸°ì‹ ìë£Œë¥¼ ì½ê³  ë¶„ì„í•˜ëŠ” ëŠ¥ë ¥ì„ í‚¤ìš°ë©° ê³ ê¸‰ ì •ë³´ì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤.",
                                "objectives": [
                                    "ê¸°ìˆ  ë…¼ë¬¸ êµ¬ì¡°ë¥¼ ì´í•´í•  ìˆ˜ ìˆë‹¤",
                                    "ì „ë¬¸ ìš©ì–´ í•´ì„ì´ ê°€ëŠ¥í•˜ë‹¤",
                                    "ì •ë³´ ê²€ìƒ‰ ë° ì„ ë³„ ëŠ¥ë ¥ì„ ê¸°ë¥¼ ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["í•™ìˆ  ë°ì´í„°ë² ì´ìŠ¤", "ì—°êµ¬ ë°©ë²•ë¡ ", "ì „ë¬¸ì  ê¸€ì“°ê¸°"],
                                "estimated_hours": 15,
                                "resources": {
                                    "videos": [
                                        {"title": "ë…¼ë¬¸ ì½ê¸° ì „ëµ", "url": "https://kmooc.kr/courses/course-137"},
                                        {"title": "í•™ìˆ  ë°ì´í„°ë² ì´ìŠ¤ í™œìš©", "url": "https://kmooc.kr/courses/course-138"}
                                    ],
                                    "web_links": [
                                        {"title": "í•™ìˆ ë…¼ë¬¸ ê²€ìƒ‰ ê°€ì´ë“œ", "url": "https://scholar.google.com/intl/ko/scholar/help.html"},
                                        {"title": "ì—°êµ¬ ë°©ë²•ë¡  ìë£Œ", "url": "https://research-methods.org/resources"}
                                    ],
                                    "documents": [
                                        {"title": "ë…¼ë¬¸ ë¶„ì„ ì›Œí¬ì‹œíŠ¸.pdf", "url": "/docs/paper-analysis-worksheet.pdf"},
                                        {"title": "ê¸°ìˆ  ë¬¸ì„œ ì‘ì„± ê°€ì´ë“œ.pdf", "url": "/docs/technical-writing-guide.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 9,
                                "title": "ê°œì¸ í”„ë¡œì íŠ¸ ê³ ë„í™”",
                                "description": "6ì£¼ì°¨ì— ì™„ë£Œí•œ ê°œì¸ í”„ë¡œì íŠ¸ë¥¼ ê°œì„ í•˜ê³  í™•ì¥í•˜ì—¬ ë” ë³µì¡í•œ ê¸°ëŠ¥ì´ë‚˜ ì„±ëŠ¥ í–¥ìƒì„ ì‹œë„í•©ë‹ˆë‹¤.",
                                "objectives": [
                                    "ê¸°ì¡´ íšŒë¡œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê°œì„ í•  ìˆ˜ ìˆë‹¤",
                                    "ì¶”ê°€ ê¸°ëŠ¥ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤",
                                    "ì„±ëŠ¥ê³¼ ì•ˆì •ì„± ëª¨ë‘ ê³ ë ¤í•œ ì„¤ê³„ê°€ ê°€ëŠ¥í•˜ë‹¤"
                                ],
                                "key_concepts": ["ì „ë ¥ ê´€ë¦¬ ì‹œìŠ¤í…œ", "ì†ŒìŒ ê°ì†Œ ê¸°ìˆ ", "ì—´ ê´€ë¦¬"],
                                "estimated_hours": 18,
                                "resources": {
                                    "videos": [
                                        {"title": "ê³ ê¸‰ íšŒë¡œ ì„¤ê³„", "url": "https://kmooc.kr/courses/course-139"},
                                        {"title": "ì „ë ¥ íš¨ìœ¨ ìµœì í™”", "url": "https://kmooc.kr/courses/course-140"}
                                    ],
                                    "web_links": [
                                        {"title": "ê³ ê¸‰ ì „ìíšŒë¡œ ê¸°ë²•", "url": "https://advanced-circuits.com/techniques"},
                                        {"title": "ì—´ ê´€ë¦¬ ì†”ë£¨ì…˜", "url": "https://thermal-management.org/solutions"}
                                    ],
                                    "documents": [
                                        {"title": "ê³ ê¸‰ ì„¤ê³„ ê¸°ë²•.pdf", "url": "/docs/advanced-design-techniques.pdf"},
                                        {"title": "ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ.pdf", "url": "/docs/performance-optimization-guide.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 10,
                                "title": "ê³ ê¸‰ ì „ì§€ ê¸°ìˆ  íƒêµ¬",
                                "description": "ìµœì‹  ì „ì§€ ê¸°ìˆ  íŠ¸ë Œë“œë¥¼ íŒŒì•…í•˜ê³  ë¯¸ë˜ ê¸°ìˆ ì— ëŒ€í•œ ì´í•´ë„ë¥¼ ë†’ì…ë‹ˆë‹¤.",
                                "objectives": [
                                    "ìµœì‹  ë°°í„°ë¦¬ ê¸°ìˆ  ë™í–¥ì„ íŒŒì•…í•  ìˆ˜ ìˆë‹¤",
                                    "ë¯¸ë˜ ì—ë„ˆì§€ ì €ì¥ ê¸°ìˆ ì„ ì´í•´í•  ìˆ˜ ìˆë‹¤",
                                    "ê¸°ìˆ  ë°œì „ ë°©í–¥ì„ ì˜ˆì¸¡í•  ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["ê³ ì²´ ì „ì§€", "ë¬´ì„  ì¶©ì „", "ì—ë„ˆì§€ í•˜ë² ìŠ¤íŒ…"],
                                "estimated_hours": 14,
                                "resources": {
                                    "videos": [
                                        {"title": "ë¯¸ë˜ ë°°í„°ë¦¬ ê¸°ìˆ ", "url": "https://kmooc.kr/courses/course-141"},
                                        {"title": "ì—ë„ˆì§€ í•˜ë² ìŠ¤íŒ… ê¸°ìˆ ", "url": "https://kmooc.kr/courses/course-142"}
                                    ],
                                    "web_links": [
                                        {"title": "ë°°í„°ë¦¬ ê¸°ìˆ  ë‰´ìŠ¤", "url": "https://battery-news.com/trends"},
                                        {"title": "ì—ë„ˆì§€ ê¸°ìˆ  ì—°êµ¬ì†Œ", "url": "https://energy-research-institute.org"}
                                    ],
                                    "documents": [
                                        {"title": "ì°¨ì„¸ëŒ€ ë°°í„°ë¦¬ ê¸°ìˆ .pdf", "url": "/docs/next-gen-battery-tech.pdf"},
                                        {"title": "ì—ë„ˆì§€ ì €ì¥ ë™í–¥.pdf", "url": "/docs/energy-storage-trends.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 11,
                                "title": "í”„ë¡œì íŠ¸ ìµœì¢… ë°œí‘œ ì¤€ë¹„",
                                "description": "ì§€ê¸ˆê¹Œì§€ í•™ìŠµí•œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ìµœì¢… í”„ë¡œì íŠ¸ë¥¼ ì™„ì„±í•˜ê³  ë°œí‘œ ìë£Œë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.",
                                "objectives": [
                                    "íš¨ê³¼ì ì¸ í”„ë ˆì  í…Œì´ì…˜ ìë£Œë¥¼ ì œì‘í•  ìˆ˜ ìˆë‹¤",
                                    "ê¸°ìˆ ì  ë‚´ìš©ì„ ëª…í™•í•˜ê²Œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤",
                                    "ì§ˆë¬¸ì— ëŒ€í•œ ì ì ˆí•œ ë‹µë³€ì„ ì¤€ë¹„í•  ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["í”„ë ˆì  í…Œì´ì…˜ ìŠ¤í‚¬", "ê¸°ìˆ  ë¬¸ì„œí™”", "ë°ëª¨ ì‹œì—°"],
                                "estimated_hours": 16,
                                "resources": {
                                    "videos": [
                                        {"title": "íš¨ê³¼ì ì¸ í”„ë ˆì  í…Œì´ì…˜ ê¸°ë²•", "url": "https://kmooc.kr/courses/course-143"},
                                        {"title": "ê¸°ìˆ  ë°œí‘œ ìŠ¤í‚¬", "url": "https://kmooc.kr/courses/course-144"}
                                    ],
                                    "web_links": [
                                        {"title": "ë°œí‘œ ìë£Œ ì œì‘ íŒ", "url": "https://presentation-tips.com/technical"},
                                        {"title": "ë°ëª¨ ì‹œì—° ê°€ì´ë“œ", "url": "https://demo-guide.org/best-practices"}
                                    ],
                                    "documents": [
                                        {"title": "ë°œí‘œìë£Œ í…œí”Œë¦¿.pdf", "url": "/docs/presentation-template.pdf"},
                                        {"title": "ê¸°ìˆ  ë°œí‘œ ì²´í¬ë¦¬ìŠ¤íŠ¸.pdf", "url": "/docs/tech-presentation-checklist.pdf"}
                                    ]
                                }
                            },
                            {
                                "week": 12,
                                "title": "í•™ìŠµ ì„±ê³¼ í‰ê°€ ë° í–¥í›„ ê³„íš",
                                "description": "12ì£¼ê°„ì˜ í•™ìŠµ ì„±ê³¼ë¥¼ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ê³  í–¥í›„ ì§€ì†ì ì¸ í•™ìŠµì„ ìœ„í•œ ê³„íšì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤.",
                                "objectives": [
                                    "í•™ìŠµ ëª©í‘œ ë‹¬ì„±ë„ë¥¼ ê°ê´€ì ìœ¼ë¡œ í‰ê°€í•  ìˆ˜ ìˆë‹¤",
                                    "ê°œì¸ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ì™„ì„±í•  ìˆ˜ ìˆë‹¤",
                                    "ì§€ì†ì ì¸ í•™ìŠµ ê³„íšì„ ìˆ˜ë¦½í•  ìˆ˜ ìˆë‹¤"
                                ],
                                "key_concepts": ["ìê¸° í‰ê°€", "í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±", "ì§€ì† í•™ìŠµ"],
                                "estimated_hours": 12,
                                "resources": {
                                    "videos": [
                                        {"title": "í•™ìŠµ ì„±ê³¼ í‰ê°€ ë°©ë²•", "url": "https://kmooc.kr/courses/course-145"},
                                        {"title": "í¬íŠ¸í´ë¦¬ì˜¤ ì œì‘ ê°€ì´ë“œ", "url": "https://kmooc.kr/courses/course-146"}
                                    ],
                                    "web_links": [
                                        {"title": "ìê¸°í‰ê°€ ë„êµ¬", "url": "https://self-assessment-tools.com"},
                                        {"title": "í‰ìƒ í•™ìŠµ ê°€ì´ë“œ", "url": "https://lifelong-learning.org/guide"}
                                    ],
                                    "documents": [
                                        {"title": "ìê¸°í‰ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸.pdf", "url": "/docs/self-assessment-checklist.pdf"},
                                        {"title": "í¬íŠ¸í´ë¦¬ì˜¤ ì‘ì„± ê°€ì´ë“œ.pdf", "url": "/docs/portfolio-creation-guide.pdf"}
                                    ]
                                }
                            }
                        ]
                    };
                    
                    localStorage.setItem('generatedCurriculum', JSON.stringify(testCurriculumData));
                    
                    // ìƒˆ ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ì‹œ ì§„í–‰ë„ ì´ˆê¸°í™”
                    resetCurriculumProgress();
                    
                    // ìƒì„± ì™„ë£Œ ìƒíƒœë¡œ ë³€ê²½
                    isGeneratingCurriculum = false;
                    
                    // ì»¤ë¦¬í˜ëŸ¼ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
                    const curriculumContent = document.getElementById('curriculumContent');
                    if (curriculumContent) {
                        showCurriculumContent(curriculumContent);
                    }
                    
                    showNotification('ì»¤ë¦¬í˜ëŸ¼ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                }, 3000); // 3ì´ˆ í›„ ìƒì„± ì‹œë®¬ë ˆì´ì…˜
                
                console.log('âœ… ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ìš”ì²­ ì™„ë£Œ');
                
            } catch (error) {
                console.error('âŒ ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ì˜¤ë¥˜:', error);
                isGeneratingCurriculum = false;
                showNotification('ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.', 'error');
                
                // ì—ëŸ¬ ë°œìƒ ì‹œ ì»¤ë¦¬í˜ëŸ¼ í˜ì´ì§€ ë³µì›
                const curriculumContent = document.getElementById('curriculumContent');
                if (curriculumContent) {
                    showCurriculumContent(curriculumContent);
                }
                
            } finally {
                // ë²„íŠ¼ ë³µì›
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<i class="fas fa-magic"></i> ë§ì¶¤í˜• ì»¤ë¦¬í˜ëŸ¼ ìƒì„±';
            }
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            updateUserDisplay(); // í˜ì´ì§€ ë¡œë“œì‹œ ì´ë¦„ ì—…ë°ì´íŠ¸
            loadUserProfile();
            setupNavigation();
            
            // í”„ë¡œí•„ ì¹´ë“œ ì´ˆê¸°í™” (ìƒˆë¡œìš´ ì„¸ì…˜ìš©)
            updateLearningProfile('', '', '');
            // localStorageì—ì„œ ì´ì „ ì„¸ì…˜ ë°ì´í„° ì‚­ì œ
            localStorage.removeItem('currentProfile');
            localStorage.removeItem('generatedCurriculum');
            // ìƒì„± ìƒíƒœ ì´ˆê¸°í™”
            isGeneratingCurriculum = false;
            
            // ê¸°ë³¸ í˜ì´ì§€ë¥¼ ë°ì´í„° ì›ì²œìœ¼ë¡œ ì„¤ì •
            navigateToPage('datasource');
        });

        // ë„¤ë¹„ê²Œì´ì…˜ ì„¤ì •
        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // í™œì„± ìƒíƒœ ë³€ê²½
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    const page = this.dataset.page;
                    navigateToPage(page);
                });
            });
        }

        // íƒ­ ì „í™˜ í•¨ìˆ˜ (í”„ë¡œê·¸ë˜ë° ë°©ì‹)
        function switchToTab(tabName) {
            const navLinks = document.querySelectorAll('.nav-link');
            
            // ëª¨ë“  íƒ­ì˜ í™œì„± ìƒíƒœ ì œê±°
            navLinks.forEach(link => link.classList.remove('active'));
            
            // í•´ë‹¹ íƒ­ í™œì„±í™”
            const targetTab = document.querySelector(`[data-page="${tabName}"]`);
            if (targetTab) {
                targetTab.classList.add('active');
                navigateToPage(tabName);
                
                // í˜ì´ì§€ ìµœìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜
        function navigateToPage(page) {
            const welcomeSubtitle = document.getElementById('welcomeSubtitle');
            const initialMessage = document.getElementById('initialMessage');
            
            if (page === 'datasource') {
                // í•™ìŠµ ë°ì´í„° ì›ì²œ ëª¨ë“œ
                welcomeSubtitle.innerHTML = '<span class="highlight">í•™ìŠµ ë°ì´í„° ì›ì²œ</span> ê´€ë¦¬';
                
                // ëŒ€í™”ì°½ê³¼ í”„ë¡œí•„ ì˜ì—­ ìˆ¨ê¸°ê¸°
                const chatWithProfile = document.querySelector('.chat-with-profile');
                const examplesSection = document.querySelector('.examples-section');
                const curriculumContent = document.getElementById('curriculumContent');
                const mentorContent = document.getElementById('mentorContent');
                
                if (chatWithProfile) chatWithProfile.style.display = 'none';
                if (examplesSection) examplesSection.style.display = 'none';
                if (curriculumContent) curriculumContent.style.display = 'none';
                if (mentorContent) mentorContent.style.display = 'none';
                
                // ë°ì´í„° ì›ì²œ ì»¨í…ì¸  ì˜ì—­ ìƒì„± ë˜ëŠ” í‘œì‹œ
                let datasourceContent = document.getElementById('datasourceContent');
                if (!datasourceContent) {
                    datasourceContent = document.createElement('div');
                    datasourceContent.id = 'datasourceContent';
                    datasourceContent.style.cssText = `
                        width: 900px;
                        background: white;
                        border-radius: 16px;
                        box-shadow: 0 4px 24px rgba(0,0,0,0.1);
                        padding: 40px;
                        margin: 20px 0;
                    `;
                    
                    const welcomeSection = document.querySelector('.welcome-section');
                    welcomeSection.parentNode.insertBefore(datasourceContent, welcomeSection.nextSibling);
                }
                
                // ë°ì´í„° ì›ì²œ UI ë‚´ìš©
                datasourceContent.innerHTML = `
                    <div style="margin-bottom: 30px;">
                        <h2 style="font-size: 24px; font-weight: 700; color: #1f2937; margin-bottom: 10px;">
                            ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ë°ì´í„° ì›ì²œ
                        </h2>
                        <p style="color: #6b7280; font-size: 14px;">
                            AIê°€ ë§ì¶¤í˜• ì»¤ë¦¬í˜ëŸ¼ì„ ìƒì„±í•  ë•Œ ì°¸ê³ í•˜ëŠ” ë°ì´í„° ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px;">
                        <!-- ì‚¬ë‚´ ë¬¸ì„œ -->
                        <div style="
                            background: white;
                            padding: 25px;
                            border-radius: 12px;
                            border: 1px solid #e5e7eb;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
                            position: relative;
                            overflow: hidden;
                        ">
                            <i class="fas fa-file-alt" style="font-size: 32px; margin-bottom: 15px; color: #667eea;"></i>
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 8px; color: #1f2937;">ì‚¬ë‚´ ë¬¸ì„œ</h3>
                            <p style="font-size: 13px; color: #6b7280; margin-bottom: 15px;">ê¸°ìˆ  ë¬¸ì„œ, ê°€ì´ë“œë¼ì¸, ë§¤ë‰´ì–¼</p>
                            
                            <!-- íŒŒì¼ í˜•ì‹ ì•„ì´ì½˜ë“¤ -->
                            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                                <div style="
                                    width: 45px;
                                    height: 45px;
                                    background: #f3f4f6;
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
                                ">
                                    <i class="fas fa-file-pdf" style="color: #DC2626; font-size: 20px;"></i>
                                </div>
                                <div style="
                                    width: 45px;
                                    height: 45px;
                                    background: #f3f4f6;
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
                                ">
                                    <i class="fas fa-file-powerpoint" style="color: #EA580C; font-size: 20px;"></i>
                                </div>
                            </div>
                            
                            <div style="
                                background: #f3f4f6;
                                padding: 8px 12px;
                                border-radius: 8px;
                                font-size: 12px;
                                display: inline-block;
                                color: #4b5563;
                            ">
                                <i class="fas fa-check-circle" style="color: #10b981;"></i> 127ê°œ ì—°ë™ë¨
                            </div>
                        </div>
                        
                        <!-- êµìœ¡ ì˜ìƒ -->
                        <div style="
                            background: white;
                            padding: 25px;
                            border-radius: 12px;
                            border: 1px solid #e5e7eb;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
                        ">
                            <i class="fas fa-video" style="font-size: 32px; margin-bottom: 15px; color: #8b5cf6;"></i>
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 8px; color: #1f2937;">êµìœ¡ ì˜ìƒ</h3>
                            <p style="font-size: 13px; color: #6b7280; margin-bottom: 15px;">ì‚¬ë‚´ êµìœ¡ ì½˜í…ì¸ , ì›¨ë¹„ë‚˜</p>
                            
                            <!-- K-MOOC ë¡œê³  -->
                            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                                <div style="
                                    width: 45px;
                                    height: 45px;
                                    background: #f3f4f6;
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
                                    font-weight: 700;
                                    font-size: 10px;
                                    color: #1E40AF;
                                ">
                                    K-MOOC
                                </div>
                            </div>
                            
                            <div style="
                                background: #f3f4f6;
                                padding: 8px 12px;
                                border-radius: 8px;
                                font-size: 12px;
                                display: inline-block;
                                color: #4b5563;
                            ">
                                <i class="fas fa-check-circle" style="color: #10b981;"></i> 45ê°œ ì—°ë™ë¨
                            </div>
                        </div>
                        
                        <!-- ì™¸ë¶€ ì›¹ -->
                        <div style="
                            background: white;
                            padding: 25px;
                            border-radius: 12px;
                            border: 1px solid #e5e7eb;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
                        ">
                            <i class="fas fa-globe" style="font-size: 32px; margin-bottom: 15px; color: #a78bfa;"></i>
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 8px; color: #1f2937;">ì™¸ë¶€ ì›¹</h3>
                            <p style="font-size: 13px; color: #6b7280; margin-bottom: 15px;">ê³µì‹ ë¬¸ì„œ, íŠœí† ë¦¬ì–¼, ë¸”ë¡œê·¸</p>
                            
                            <!-- DuckDuckGo ë¡œê³  -->
                            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                                <div style="
                                    width: 45px;
                                    height: 45px;
                                    background: #f3f4f6;
                                    border-radius: 50%;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
                                    padding: 8px;
                                ">
                                    <img src="https://upload.wikimedia.org/wikipedia/en/thumb/8/88/DuckDuckGo_logo.svg/1200px-DuckDuckGo_logo.svg.png" 
                                         alt="DuckDuckGo" 
                                         style="width: 100%; height: 100%; object-fit: contain;"
                                    />
                                </div>
                            </div>
                            
                            <div style="
                                background: #f3f4f6;
                                padding: 8px 12px;
                                border-radius: 8px;
                                font-size: 12px;
                                display: inline-block;
                                color: #4b5563;
                            ">
                                <i class="fas fa-check-circle" style="color: #10b981;"></i> 320ê°œ ì—°ë™ë¨
                            </div>
                        </div>
                    </div>
                    
                    <!-- ìµœê·¼ ì—…ë°ì´íŠ¸ -->
                    <div style="
                        background: #f9fafb;
                        padding: 25px;
                        border-radius: 12px;
                        border: 1px solid #e5e7eb;
                    ">
                        <h3 style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 15px;">
                            <i class="fas fa-sync-alt" style="margin-right: 8px; color: #6366f1;"></i>
                            ìµœê·¼ ì—…ë°ì´íŠ¸ëœ ë°ì´í„°
                        </h3>
                        <div style="space-y: 10px;">
                            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e5e7eb;">
                                <span style="color: #4b5563; font-size: 14px;">
                                    <i class="fas fa-file-alt" style="color: #667eea; margin-right: 8px;"></i>
                                    Python ê°œë°œ ê°€ì´ë“œ v2.1
                                </span>
                                <span style="color: #9ca3af; font-size: 12px;">2ì‹œê°„ ì „</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #e5e7eb;">
                                <span style="color: #4b5563; font-size: 14px;">
                                    <i class="fas fa-video" style="color: #f5576c; margin-right: 8px;"></i>
                                    React 18 ë§ˆì´ê·¸ë ˆì´ì…˜ ì›¨ë¹„ë‚˜
                                </span>
                                <span style="color: #9ca3af; font-size: 12px;">5ì‹œê°„ ì „</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 10px 0;">
                                <span style="color: #4b5563; font-size: 14px;">
                                    <i class="fas fa-globe" style="color: #00f2fe; margin-right: 8px;"></i>
                                    AWS Lambda ê³µì‹ ë¬¸ì„œ
                                </span>
                                <span style="color: #9ca3af; font-size: 12px;">1ì¼ ì „</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
                    <div style="margin-top: 30px; text-align: center; display: flex; gap: 15px; justify-content: center;">
                        <button style="
                            background: linear-gradient(135deg, #667eea, #764ba2);
                            color: white;
                            padding: 12px 30px;
                            border: none;
                            border-radius: 8px;
                            font-size: 15px;
                            font-weight: 600;
                            cursor: pointer;
                            transition: transform 0.2s;
                            width: 220px;
                        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            <i class="fas fa-plus-circle" style="margin-right: 8px;"></i>
                            ìƒˆ ë°ì´í„° ì›ì²œ ì¶”ê°€
                        </button>
                        
                        <button onclick="switchToTab('chat')" style="
                            background: linear-gradient(135deg, #a855f7, #ec4899);
                            color: white;
                            border: none;
                            padding: 12px 30px;
                            border-radius: 8px;
                            font-size: 15px;
                            font-weight: 600;
                            cursor: pointer;
                            transition: transform 0.2s;
                            width: 220px;
                        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            <i class="fas fa-bullseye" style="margin-right: 8px;"></i>
                            ë§ì¶¤í˜• í•™ìŠµ ì¶”ì²œ ì‹œì‘
                        </button>
                    </div>
                `;
                
                datasourceContent.style.display = 'block';
                return;
            } else if (page === 'chat') {
                // ë§ì¶¤í˜• í•™ìŠµ ì¶”ì²œ ëª¨ë“œ
                welcomeSubtitle.innerHTML = 'ì˜¤ëŠ˜ <span class="highlight">ë¬´ì—‡ì„</span> ë°°ìš°ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?';
                initialMessage.textContent = 'ì•ˆë…•í•˜ì„¸ìš”! LearningMateì˜ í•™ìŠµ ë©˜í† ì…ë‹ˆë‹¤. ì–´ë–¤ ì£¼ì œì— ëŒ€í•´ ë°°ìš°ê³  ì‹¶ìœ¼ì‹ ì§€ ì•Œë ¤ì£¼ì„¸ìš”. ë§ì¶¤í˜• í•™ìŠµ ê³„íšì„ í•¨ê»˜ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.';
                
                // ëŒ€í™”ì°½ê³¼ í”„ë¡œí•„, ì˜ˆì‹œ ì˜ì—­ ë‹¤ì‹œ ë³´ì´ê¸°
                const chatWithProfile = document.querySelector('.chat-with-profile');
                const examplesSection = document.querySelector('.examples-section');
                const curriculumContent = document.getElementById('curriculumContent');
                const datasourceContent = document.getElementById('datasourceContent');
                const mentorContent = document.getElementById('mentorContent');
                
                if (chatWithProfile) chatWithProfile.style.display = 'flex';
                if (examplesSection) examplesSection.style.display = 'block';
                if (curriculumContent) curriculumContent.style.display = 'none';
                if (datasourceContent) datasourceContent.style.display = 'none';
                if (mentorContent) mentorContent.style.display = 'none';
                
                return;
            } else if (page === 'profile') {
                // AI ë©˜í†  ëª¨ë“œ
                welcomeSubtitle.innerHTML = 'ì–´ë–¤ ë¶„ì•¼ì˜ <span class="highlight">ë©˜í† ê°€</span> í•„ìš”í•˜ì‹ ê°€ìš”?';
                
                // ê¸°ì¡´ ìš”ì†Œë“¤ ìˆ¨ê¸°ê¸°
                const chatWithProfile = document.querySelector('.chat-with-profile');
                const examplesSection = document.querySelector('.examples-section');
                const curriculumContent = document.getElementById('curriculumContent');
                const datasourceContent = document.getElementById('datasourceContent');
                
                if (chatWithProfile) chatWithProfile.style.display = 'none';
                if (examplesSection) examplesSection.style.display = 'none';
                if (curriculumContent) curriculumContent.style.display = 'none';
                if (datasourceContent) datasourceContent.style.display = 'none';
                
                // AI ë©˜í†  ì„ íƒ UI ìƒì„±
                let mentorContent = document.getElementById('mentorContent');
                if (!mentorContent) {
                    mentorContent = document.createElement('div');
                    mentorContent.id = 'mentorContent';
                    mentorContent.style.cssText = `
                        width: 900px;
                        background: white;
                        border-radius: 16px;
                        box-shadow: 0 4px 24px rgba(0,0,0,0.1);
                        padding: 40px;
                        margin: 20px 0;
                    `;
                    
                    const welcomeSection = document.querySelector('.welcome-section');
                    welcomeSection.parentNode.insertBefore(mentorContent, welcomeSection.nextSibling);
                }
                
                mentorContent.innerHTML = `
                    <!-- ìì—°ì–´ ì§ˆë¬¸ ì„¹ì…˜ -->
                    <div style="margin-bottom: 40px;">
                        <div style="
                            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
                            border: 1px solid #e2e8f0;
                            border-radius: 12px;
                            padding: 20px;
                            margin-bottom: 20px;
                        ">
                            <label style="
                                display: block;
                                font-size: 16px;
                                font-weight: 600;
                                color: #374151;
                                margin-bottom: 12px;
                                text-align: center;
                            ">ìì—°ì–´ë¡œ ê³ ë¯¼ì´ë‚˜ ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</label>
                            <textarea 
                                id="naturalQuestionInput"
                                placeholder="ì˜ˆ: íŒŒì´ì¬ìœ¼ë¡œ ì›¹ ê°œë°œì„ ë°°ìš°ê³  ì‹¶ì€ë° ì–´ë–»ê²Œ ì‹œì‘í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ì–´ìš”"
                                style="
                                    width: 100%;
                                    min-height: 80px;
                                    padding: 15px;
                                    border: 2px solid #e5e7eb;
                                    border-radius: 8px;
                                    font-size: 14px;
                                    resize: vertical;
                                    outline: none;
                                    transition: border-color 0.2s;
                                "
                                onfocus="this.style.borderColor='#667eea'"
                                onblur="this.style.borderColor='#e5e7eb'"
                            ></textarea>
                            <div style="text-align: center; margin-top: 12px;">
                                <button onclick="findMentorByQuestion()" style="
                                    background: linear-gradient(135deg, #667eea, #764ba2);
                                    color: white;
                                    border: none;
                                    padding: 12px 24px;
                                    border-radius: 8px;
                                    font-size: 14px;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: transform 0.2s;
                                " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                                    <i class="fas fa-search" style="margin-right: 8px;"></i>
                                    ì í•©í•œ ë©˜í†  ì°¾ê¸°
                                </button>
                            </div>
                        </div>
                        
                        <div style="text-align: center; color: #6b7280; font-size: 14px; margin: 20px 0;">
                            ë˜ëŠ”
                        </div>
                    </div>
                    
                    <!-- ë©˜í†  ì§ì ‘ ì„ íƒ ì„¹ì…˜ -->
                    <div>
                        <h3 style="font-size: 18px; font-weight: 600; color: #374151; margin-bottom: 20px; text-align: center;">
                            ì§ì ‘ í•„ìš”í•œ ë¶„ì•¼ì˜ ë©˜í† ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”
                        </h3>
                        
                        <!-- ë©˜í†  ë¦¬ìŠ¤íŠ¸ -->
                        <div id="mentorList" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px;">
                            <!-- ì—…ë¬´ ê³¼ì™¸ ì„ ìƒë‹˜ -->
                            <div class="mentor-card" data-mentor="engineer" draggable="true" style="
                                background: white;
                                border: 2px solid #e5e7eb;
                                border-radius: 12px;
                                padding: 20px;
                                cursor: grab;
                                transition: all 0.2s;
                                text-align: center;
                            " onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-2px)'" 
                               onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'"
                               onclick="selectMentor('engineer')">
                                <div style="margin-bottom: 12px;">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1L9 7V9C9 11.8 11.2 14 14 14V22H16V14C18.8 14 21 11.8 21 9ZM11 9V7.5L12 6.5L13 7.5V9C13 10.7 11.7 12 10 12S7 10.7 7 9Z" fill="#3B82F6"/>
                                        <circle cx="12" cy="16" r="1" fill="#3B82F6"/>
                                        <circle cx="8" cy="18" r="1" fill="#3B82F6"/>
                                        <circle cx="16" cy="18" r="1" fill="#3B82F6"/>
                                    </svg>
                                </div>
                                <h4 style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 8px;">ì—…ë¬´ ê³¼ì™¸ ì„ ìƒë‹˜</h4>
                                <p style="font-size: 12px; color: #6b7280; line-height: 1.4;">
                                    ì‹¤ë¬´ í˜„ì¥ì—ì„œ ë°”ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” ì‹¤ìš©ì ì¸ ìŠ¤í‚¬ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤
                                </p>
                            </div>
                            
                            <!-- ì¼íƒ€ ê°•ì‚¬ -->
                            <div class="mentor-card" data-mentor="executive" draggable="true" style="
                                background: white;
                                border: 2px solid #e5e7eb;
                                border-radius: 12px;
                                padding: 20px;
                                cursor: grab;
                                transition: all 0.2s;
                                text-align: center;
                            " onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-2px)'" 
                               onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'"
                               onclick="selectMentor('executive')">
                                <div style="margin-bottom: 12px;">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2Z" fill="#8B5A2B"/>
                                        <path d="M8 7L16 7C17.1 7 18 7.9 18 9L18 11C18 11.6 17.6 12 17 12L7 12C6.4 12 6 11.6 6 11L6 9C6 7.9 6.9 7 8 7Z" fill="#1F2937"/>
                                        <path d="M9 12L15 12L15 20C15 21.1 14.1 22 13 22L11 22C9.9 22 9 21.1 9 20L9 12Z" fill="#1F2937"/>
                                        <path d="M10 9L14 9C14.6 9 15 9.4 15 10C15 10.6 14.6 11 14 11L10 11C9.4 11 9 10.6 9 10C9 9.4 9.4 9 10 9Z" fill="#3B82F6"/>
                                        <circle cx="6" cy="4" r="2" fill="#F59E0B"/>
                                        <circle cx="18" cy="4" r="2" fill="#10B981"/>
                                    </svg>
                                </div>
                                <h4 style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 8px;">ì¼íƒ€ ê°•ì‚¬</h4>
                                <p style="font-size: 12px; color: #6b7280; line-height: 1.4;">
                                    ê° ë¶„ì•¼ë³„ ì „ë¬¸ê°€ë¡œì„œ í•µì‹¬ë§Œ ì™ì™ ë½‘ì•„ ëª…ì¾Œí•˜ê²Œ ì„¤ëª…í•´ë“œë¦½ë‹ˆë‹¤
                                </p>
                            </div>
                            
                            <!-- êµìˆ˜ -->
                            <div class="mentor-card" data-mentor="professor" draggable="true" style="
                                background: white;
                                border: 2px solid #e5e7eb;
                                border-radius: 12px;
                                padding: 20px;
                                cursor: grab;
                                transition: all 0.2s;
                                text-align: center;
                            " onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-2px)'" 
                               onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'"
                               onclick="selectMentor('professor')">
                                <div style="margin-bottom: 12px;">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 3L1 9L12 15L21 10.09V17H23V9L12 3Z" fill="#059669"/>
                                        <path d="M5 13.18V17.18C5 19.19 8.03 21 12 21S19 19.19 19 17.18V13.18L12 17L5 13.18Z" fill="#34D399"/>
                                        <circle cx="12" cy="7" r="2" fill="#1F2937"/>
                                        <path d="M9 11C9 9.9 9.9 9 11 9H13C14.1 9 15 9.9 15 11V12H9V11Z" fill="#8B5A2B"/>
                                    </svg>
                                </div>
                                <h4 style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 8px;">êµìˆ˜</h4>
                                <p style="font-size: 12px; color: #6b7280; line-height: 1.4;">
                                    í•™ë¬¸ì  ê¹Šì´ ìˆëŠ” ì„¤ëª…ê³¼ ì²´ê³„ì ì¸ í•™ìŠµ ë°©ë²•ì„ ì œì‹œí•©ë‹ˆë‹¤
                                </p>
                            </div>
                            
                            <!-- ê°œë°œì -->
                            <div class="mentor-card" data-mentor="designer" draggable="true" style="
                                background: white;
                                border: 2px solid #e5e7eb;
                                border-radius: 12px;
                                padding: 20px;
                                cursor: grab;
                                transition: all 0.2s;
                                text-align: center;
                            " onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-2px)'" 
                               onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'"
                               onclick="selectMentor('designer')">
                                <div style="margin-bottom: 12px;">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9.4 16.6L4.8 12L9.4 7.4L10.8 8.8L7.6 12L10.8 15.2L9.4 16.6Z" fill="#EC4899"/>
                                        <path d="M14.6 16.6L13.2 15.2L16.4 12L13.2 8.8L14.6 7.4L19.2 12L14.6 16.6Z" fill="#EC4899"/>
                                        <circle cx="12" cy="12" r="3" fill="#A855F7"/>
                                        <path d="M12 2C16.4 2 20 5.6 20 10C20 14.4 16.4 18 12 18C7.6 18 4 14.4 4 10C4 5.6 7.6 2 12 2ZM12 4C8.7 4 6 6.7 6 10C6 13.3 8.7 16 12 16C15.3 16 18 13.3 18 10C18 6.7 15.3 4 12 4Z" fill="#8B5CF6" opacity="0.3"/>
                                        <path d="M8 20H16L15 22H9L8 20Z" fill="#6366F1"/>
                                    </svg>
                                </div>
                                <h4 style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 8px;">ê°œë°œì</h4>
                                <p style="font-size: 12px; color: #6b7280; line-height: 1.4;">
                                    ì½”ë”©ê³¼ ê°œë°œ ì‹¤ë¬´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì²´ê³„ì ì¸ í”„ë¡œê·¸ë˜ë°ì„ ê°€ë¥´ì³ë“œë¦½ë‹ˆë‹¤
                                </p>
                            </div>
                            
                            <!-- Data Scientist -->
                            <div class="mentor-card" data-mentor="datascientist" draggable="true" style="
                                background: white;
                                border: 2px solid #e5e7eb;
                                border-radius: 12px;
                                padding: 20px;
                                cursor: grab;
                                transition: all 0.2s;
                                text-align: center;
                            " onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-2px)'" 
                               onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'"
                               onclick="selectMentor('datascientist')">
                                <div style="margin-bottom: 12px;">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <rect x="3" y="3" width="18" height="18" rx="2" fill="#F3F4F6" stroke="#D1D5DB" stroke-width="2"/>
                                        <path d="M7 16L10 13L13 16L17 12L17 16H7Z" fill="#10B981"/>
                                        <path d="M7 12L10 9L13 12L17 8" stroke="#059669" stroke-width="2" fill="none"/>
                                        <circle cx="7" cy="12" r="2" fill="#34D399"/>
                                        <circle cx="10" cy="9" r="2" fill="#10B981"/>
                                        <circle cx="13" cy="12" r="2" fill="#059669"/>
                                        <circle cx="17" cy="8" r="2" fill="#047857"/>
                                        <rect x="2" y="2" width="4" height="1" fill="#6366F1"/>
                                        <rect x="18" y="2" width="4" height="1" fill="#6366F1"/>
                                        <rect x="2" y="21" width="4" height="1" fill="#6366F1"/>
                                        <rect x="18" y="21" width="4" height="1" fill="#6366F1"/>
                                    </svg>
                                </div>
                                <h4 style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 8px;">ì˜ì–´ ì„ ìƒë‹˜</h4>
                                <p style="font-size: 12px; color: #6b7280; line-height: 1.4;">
                                    ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ì–´ì™€ ì‹¤ë¬´ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ìŠ¤í‚¬ì„ ê°€ë¥´ì³ë“œë¦½ë‹ˆë‹¤
                                </p>
                            </div>
                            
                            <!-- Marketing -->
                            <div class="mentor-card" data-mentor="marketing" draggable="true" style="
                                background: white;
                                border: 2px solid #e5e7eb;
                                border-radius: 12px;
                                padding: 20px;
                                cursor: grab;
                                transition: all 0.2s;
                                text-align: center;
                            " onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-2px)'" 
                               onmouseout="this.style.borderColor='#e5e7eb'; this.style.transform='translateY(0)'"
                               onclick="selectMentor('marketing')">
                                <div style="margin-bottom: 12px;">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M3 7V17C3 18.1 3.9 19 5 19H19C20.1 19 21 18.1 21 17V7L12 13L3 7Z" fill="#F59E0B"/>
                                        <path d="M21 5H3C1.9 5 1 5.9 1 7V17C1 18.1 1.9 19 3 19H21C22.1 19 23 18.1 23 17V7C23 5.9 22.1 5 21 5ZM21 7L12 13L3 7V7C3 6.4 3.4 6 4 6H20C20.6 6 21 6.4 21 7V7Z" fill="#EF4444"/>
                                        <path d="M7 9H17V11H7V9ZM7 13H15V15H7V13Z" fill="#FEF3C7"/>
                                        <circle cx="18" cy="6" r="3" fill="#DC2626"/>
                                        <path d="M16.5 5.5L17.5 6.5L19.5 4.5" stroke="white" stroke-width="1" fill="none"/>
                                    </svg>
                                </div>
                                <h4 style="font-size: 16px; font-weight: 600; color: #374151; margin-bottom: 8px;">ëª…ë¦¬í•™ì</h4>
                                <p style="font-size: 12px; color: #6b7280; line-height: 1.4;">
                                    ì§ì¥ ìƒí™œ ìš´ì„¸ì™€ ì¸ê°„ê´€ê³„ë¥¼ ëª…ë¦¬í•™ìœ¼ë¡œ ì¬ë¯¸ìˆê²Œ í’€ì–´ë“œë¦½ë‹ˆë‹¤
                                </p>
                            </div>
                        </div>
                        
                        <!-- ì„ íƒëœ ë©˜í† ë“¤ í‘œì‹œ ì˜ì—­ -->
                        <div id="selectedMentors" style="
                            min-height: 100px;
                            border: 2px dashed #d1d5db;
                            border-radius: 12px;
                            padding: 20px;
                            background: #f9fafb;
                            text-align: center;
                            margin-bottom: 20px;
                        ">
                            <div style="color: #6b7280; font-size: 14px;">
                                ì„ íƒëœ ë©˜í† ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
                            </div>
                        </div>
                        
                        <!-- ì‹œì‘ ë²„íŠ¼ -->
                        <div style="text-align: center;">
                            <button id="startMentoringBtn" onclick="startMentoring()" style="
                                background: linear-gradient(135deg, #a855f7, #ec4899);
                                color: white;
                                border: none;
                                padding: 15px 40px;
                                border-radius: 10px;
                                font-size: 16px;
                                font-weight: 600;
                                cursor: pointer;
                                transition: transform 0.2s;
                                opacity: 0.5;
                                pointer-events: none;
                            " onmouseover="if(!this.disabled) this.style.transform='scale(1.05)'" 
                               onmouseout="this.style.transform='scale(1)'">
                                <i class="fas fa-play" style="margin-right: 8px;"></i>
                                ë©˜í† ë§ ì‹œì‘í•˜ê¸°
                            </button>
                        </div>
                    </div>
                `;
                
                mentorContent.style.display = 'block';
                return;
            } else if (page === 'curriculum') {
                // ë‚˜ì˜ ì»¤ë¦¬í˜ëŸ¼ ëª¨ë“œ  
                welcomeSubtitle.innerHTML = '<span class="highlight">ë‚˜ì˜ ì»¤ë¦¬í˜ëŸ¼</span>';
                
                // ëŒ€í™”ì°½ê³¼ í”„ë¡œí•„ ì˜ì—­ ìˆ¨ê¸°ê¸°
                const chatWithProfile = document.querySelector('.chat-with-profile');
                const examplesSection = document.querySelector('.examples-section');
                const datasourceContent = document.getElementById('datasourceContent');
                const mentorContent = document.getElementById('mentorContent');
                
                if (chatWithProfile) chatWithProfile.style.display = 'none';
                if (examplesSection) examplesSection.style.display = 'none';
                if (datasourceContent) datasourceContent.style.display = 'none';
                if (mentorContent) mentorContent.style.display = 'none';
                
                // ì»¤ë¦¬í˜ëŸ¼ ì „ìš© ì»¨í…ì¸  ì˜ì—­ ìƒì„± ë˜ëŠ” í‘œì‹œ
                let curriculumContent = document.getElementById('curriculumContent');
                if (!curriculumContent) {
                    // ì»¤ë¦¬í˜ëŸ¼ ì»¨í…ì¸  ì˜ì—­ì´ ì—†ìœ¼ë©´ ìƒì„±
                    curriculumContent = document.createElement('div');
                    curriculumContent.id = 'curriculumContent';
                    curriculumContent.className = 'curriculum-content';
                    curriculumContent.style.cssText = `
                        width: 100%;
                        max-width: 1000px;
                        background: white;
                        border-radius: 16px;
                        box-shadow: 0 4px 24px rgba(0,0,0,0.1);
                        padding: 40px;
                        margin: 20px 0;
                        text-align: center;
                        color: #6b7280;
                        line-height: 1.6;
                    `;
                    
                    // welcome-section ë‹¤ìŒì— ì¶”ê°€
                    const welcomeSection = document.querySelector('.welcome-section');
                    welcomeSection.parentNode.insertBefore(curriculumContent, welcomeSection.nextSibling);
                }
                
                // ì»¤ë¦¬í˜ëŸ¼ ì»¨í…ì¸ ë¥¼ ì „ì²´ í™”ë©´ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë³€ê²½
                curriculumContent.style.cssText = `
                    width: 900px;
                    height: 600px;
                    background: white;
                    border-radius: 12px;
                    border: 1px solid #d1d5db;
                    margin: 20px 0;
                    position: relative;
                    display: block;
                    padding: 20px;
                `;
                
                // ì»¤ë¦¬í˜ëŸ¼ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸
                showCurriculumContent(curriculumContent);
                return;
            }
            // ë‹¤ë¥¸ í˜ì´ì§€ë“¤ì€ í–¥í›„ SPA ë¼ìš°íŒ… êµ¬í˜„ ì˜ˆì •
            showNotification(`${page} í˜ì´ì§€ë¡œ ì´ë™ (ê°œë°œ ì˜ˆì •)`);
        }

        // ì‚¬ìš©ì í”„ë¡œí•„ ë¡œë“œ
        function loadUserProfile() {
            // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚¬ìš©ì ì •ë³´ ë¡œë“œ (í–¥í›„ ì„œë²„ì—ì„œ ê°€ì ¸ì˜¬ ì˜ˆì •)
            const savedUser = localStorage.getItem('learnai_user');
            if (savedUser) {
                const parsedUser = JSON.parse(savedUser);
                currentUser = { ...currentUser, ...parsedUser };
                updateUserDisplay();
            }
        }

        // ì‚¬ìš©ì í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateUserDisplay() {
            const userName = document.getElementById('userName');
            userName.textContent = currentUser.name;
        }

        // ë©”ì‹œì§€ ì¶”ê°€
        function addMessage(message, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            
            const avatar = document.createElement('div');
            avatar.className = `message-avatar ${isUser ? 'user-avatar' : 'ai-avatar-small'}`;
            avatar.textContent = isUser ? 'U' : 'AI';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            
            if (isUser) {
                // ì‚¬ìš©ì ë©”ì‹œì§€ëŠ” í”Œë ˆì¸ í…ìŠ¤íŠ¸
                content.textContent = message;
            } else {
                // AI ë©”ì‹œì§€ëŠ” ê°„ë‹¨í•œ ë§ˆí¬ë‹¤ìš´ ì²˜ë¦¬
                content.innerHTML = formatSimpleMarkdown(message);
                // í”„ë¡œí•„ ì •ë³´ ì¶”ì¶œ ë° ì—…ë°ì´íŠ¸
                extractAndUpdateProfile(message);
            }
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ì²˜ë¦¬
        function handleKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // í…ìŠ¤íŠ¸ì˜ì—­ ë†’ì´ ì¡°ì •
        function adjustTextareaHeight(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }

        // ì˜ˆì‹œ ì‚¬ìš©
        function useExample(exampleText) {
            messageInput.value = exampleText;
            adjustTextareaHeight(messageInput);
            messageInput.focus();
        }

        // ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µìš© ë©”ì‹œì§€ ì¶”ê°€
        function addStreamingMessage() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai-message';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar ai-avatar-small';
            avatar.textContent = 'AI';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            content.textContent = '';
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            return content;
        }

        // ì„¸ì…˜ ID ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
        function getSessionId() {
            // 1. ì„œë²„ì—ì„œ ì „ë‹¬ë°›ì€ ì„¸ì…˜ ID ìš°ì„  ì‚¬ìš©
            if (SESSION_ID && SESSION_ID !== '') {
                return SESSION_ID;
            }
            
            // 2. ì¿ í‚¤ì—ì„œ session_id ì¶”ì¶œ
            const cookies = document.cookie.split(';');
            for (let cookie of cookies) {
                const [name, value] = cookie.trim().split('=');
                if (name === 'session_id') {
                    return value;
                }
            }
            return null;
        }

        // ë©”ì‹œì§€ ì „ì†¡
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // ì‚¬ìš©ì ë©”ì‹œì§€ í‘œì‹œ
            addMessage(message, true);
            messageInput.value = '';
            messageInput.style.height = 'auto';
            
            // ë²„íŠ¼ ë¹„í™œì„±í™” ë° ë¡œë”© í‘œì‹œ
            sendButton.disabled = true;
            sendButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';

            // ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µìš© ë©”ì‹œì§€ ì»¨í…Œì´ë„ˆ ìƒì„±
            const streamingContent = addStreamingMessage();

            try {
                // ì„¸ì…˜ ID ê°€ì ¸ì˜¤ê¸°
                const sessionId = getSessionId();
                
                // EventSourceë¡œ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ë°›ê¸°
                const response = await fetch('/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Session-ID': sessionId || ''  // í—¤ë”ë¡œë„ ì „ì†¡
                    },
                    credentials: 'include', // ì¿ í‚¤ í¬í•¨
                    body: JSON.stringify({ 
                        message: message,
                        session_id: sessionId  // ë°”ë””ì—ë„ í¬í•¨
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const reader = response.body.getReader();
                const decoder = new TextDecoder();
                let buffer = '';

                while (true) {
                    const { done, value } = await reader.read();
                    if (done) break;
                    
                    buffer += decoder.decode(value, { stream: true });
                    const lines = buffer.split('\n');
                    buffer = lines.pop() || ''; // ë§ˆì§€ë§‰ ë¶ˆì™„ì „í•œ ë¼ì¸ì€ ë²„í¼ì— ìœ ì§€
                    
                    for (const line of lines) {
                        if (line.startsWith('data: ')) {
                            try {
                                const data = JSON.parse(line.slice(6));
                                if (data.content) {
                                    // ìŠ¤íŠ¸ë¦¬ë° ì¤‘ì—ëŠ” í…ìŠ¤íŠ¸ ëˆ„ì 
                                    const currentText = streamingContent.getAttribute('data-raw-text') || '';
                                    const newText = currentText + data.content;
                                    streamingContent.setAttribute('data-raw-text', newText);
                                    
                                    // ê°„ë‹¨í•œ ë§ˆí¬ë‹¤ìš´ ì²˜ë¦¬
                                    streamingContent.innerHTML = formatSimpleMarkdown(newText);
                                    chatMessages.scrollTop = chatMessages.scrollHeight;
                                    
                                    // í”„ë¡œí•„ ì •ë³´ê°€ ìˆëŠ” ê²½ìš° ì—…ë°ì´íŠ¸
                                    if (data.profile) {
                                        console.log('í”„ë¡œí•„ ì •ë³´ ìˆ˜ì‹ :', data.profile);
                                        
                                        // í˜„ì¬ ì„¸ì…˜ì˜ í”„ë¡œí•„ë§Œ ì‚¬ìš©í•˜ê³ , ì´ì „ ì„¸ì…˜ ì •ë³´ëŠ” ë¬´ì‹œ
                                        updateLearningProfile(data.profile.topic || '', data.profile.constraints || '', data.profile.goal || '');
                                    } else {
                                        console.log('í”„ë¡œí•„ ì •ë³´ ì—†ìŒ:', data);
                                    }
                                } else if (data.error) {
                                    streamingContent.textContent = `ì˜¤ë¥˜: ${data.error}`;
                                    break;
                                } else if (data.done) {
                                    break;
                                }
                            } catch (e) {
                                console.error('JSON íŒŒì‹± ì˜¤ë¥˜:', e);
                            }
                        }
                    }
                }

            } catch (error) {
                streamingContent.textContent = `ì—°ê²° ì˜¤ë¥˜: ${error.message}`;
            }

            // ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
            sendButton.disabled = false;
            sendButton.innerHTML = '<i class="fas fa-arrow-up"></i>';
        }

        // ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸
        function updateUserProfile(profileData) {
            currentUser = { ...currentUser, ...profileData };
            localStorage.setItem('learnai_user', JSON.stringify(currentUser));
            updateUserDisplay();
            showNotification('í”„ë¡œí•„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤');
        }

        // ì•Œë¦¼ í‘œì‹œ
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // ì»¤ë¦¬í˜ëŸ¼ ì½˜í…ì¸  í‘œì‹œ í•¨ìˆ˜
        function showCurriculumContent(container) {
            // ìƒì„± ì¤‘ì¸ ê²½ìš° ë¡œë”© ìƒíƒœ ìœ ì§€
            if (isGeneratingCurriculum) {
                displayLoadingState(container);
                return;
            }
            
            // ì„ì‹œë¡œ ìƒì„±ëœ ì»¤ë¦¬í˜ëŸ¼ì´ ìˆëŠ”ì§€ í™•ì¸ (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ê°€ì ¸ì˜¬ ì˜ˆì •)
            const hasCurriculum = localStorage.getItem('generatedCurriculum');
            
            if (hasCurriculum) {
                // ìƒì„±ëœ ì»¤ë¦¬í˜ëŸ¼ì´ ìˆìœ¼ë©´ ì¹´ë“œ í˜•íƒœë¡œ í‘œì‹œ
                const curriculumData = JSON.parse(hasCurriculum);
                displayCurriculumCards(container, curriculumData);
            } else {
                // ìƒì„±ëœ ì»¤ë¦¬í˜ëŸ¼ì´ ì—†ìœ¼ë©´ + ë°•ìŠ¤ í‘œì‹œ
                displayEmptyState(container);
            }
        }

        // ë¹ˆ ìƒíƒœ (+ ë°•ìŠ¤) í‘œì‹œ
        function displayEmptyState(container) {
            container.innerHTML = `
                <div style="
                    position: absolute;
                    top: 30px;
                    left: 30px;
                    width: 240px;
                    height: 180px;
                    border: 2px dashed #d1d5db;
                    border-radius: 8px;
                    background: #fafafa;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    transition: all 0.2s ease;
                    font-size: 36px;
                    color: #9ca3af;
                    font-weight: 300;
                " 
                onclick="switchToTab('chat')"
                onmouseover="this.style.borderColor='#a855f7'; this.style.background='#f8fafc'; this.style.color='#a855f7'"
                onmouseout="this.style.borderColor='#d1d5db'; this.style.background='#fafafa'; this.style.color='#9ca3af'"
                title="ìƒˆ ì»¤ë¦¬í˜ëŸ¼ ìƒì„±í•˜ê¸°">
                    +
                </div>
                
                <!-- + ë°•ìŠ¤ ì•„ë˜ ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
                <div style="
                    position: absolute;
                    top: 240px;
                    left: 30px;
                ">
                    <button onclick="switchToTab('chat')" style="
                        width: 240px;
                        background: linear-gradient(135deg, #a855f7, #ec4899);
                        color: white;
                        border: none;
                        border-radius: 8px;
                        padding: 12px 0;
                        font-size: 14px;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.2s ease;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    " onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 16px rgba(168, 85, 247, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                        ë§ì¶¤í˜• í•™ìŠµ ì¶”ì²œìœ¼ë¡œ ì´ë™ â†’
                    </button>
                </div>
            `;
        }

        // ë¡œë”© ìƒíƒœ í‘œì‹œ
        function displayLoadingState(container) {
            container.innerHTML = `
                <div style="
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    height: 100%;
                    color: #6b7280;
                ">
                    <div style="
                        width: 60px;
                        height: 60px;
                        border: 4px solid #f3f4f6;
                        border-top: 4px solid #a855f7;
                        border-radius: 50%;
                        animation: spin 1s linear infinite;
                        margin-bottom: 20px;
                    "></div>
                    <h3 style="
                        font-size: 18px;
                        font-weight: 600;
                        color: #374151;
                        margin: 0 0 8px 0;
                    ">ì»¤ë¦¬í˜ëŸ¼ ìƒì„± ì¤‘...</h3>
                    <p style="
                        font-size: 14px;
                        color: #6b7280;
                        margin: 0;
                        text-align: center;
                    ">AIê°€ ë§ì¶¤í˜• í•™ìŠµ ê³„íšì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br>ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
                </div>
                
                <style>
                    @keyframes spin {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                </style>
            `;
        }

        // ì»¤ë¦¬í˜ëŸ¼ ì¹´ë“œë“¤ í‘œì‹œ
        function displayCurriculumCards(container, data) {
            const modules = data.modules || [];
            let cardsHtml = '';
            
            // ì§„í–‰ë„ ìƒíƒœ ê°€ì ¸ì˜¤ê¸°
            const completedWeeks = JSON.parse(localStorage.getItem('curriculumProgress') || '[]');
            const totalWeeks = modules.length;
            const completedCount = completedWeeks.length;
            const progressPercentage = totalWeeks > 0 ? (completedCount / totalWeeks) * 100 : 0;

            // í—¤ë” ì •ë³´
            cardsHtml += `
                <div style="margin-bottom: 24px;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                        <div style="
                            background: linear-gradient(135deg, #a855f7, #ec4899);
                            color: white;
                            padding: 6px 12px;
                            border-radius: 6px;
                            font-size: 12px;
                            font-weight: 600;
                            text-transform: uppercase;
                        ">
                            ${data.level || 'Beginner'}
                        </div>
                        <div style="color: #6b7280; font-size: 14px;">
                            ${data.duration_weeks || 0}ì£¼ ê³¼ì •
                        </div>
                        <div style="
                            background: ${progressPercentage > 0 ? '#10b981' : '#f3f4f6'};
                            color: ${progressPercentage > 0 ? 'white' : '#6b7280'};
                            padding: 4px 8px;
                            border-radius: 12px;
                            font-size: 11px;
                            font-weight: 600;
                            margin-left: auto;
                        ">
                            ${completedCount}/${totalWeeks} ì™„ë£Œ
                        </div>
                    </div>
                    <h2 style="
                        font-size: 18px;
                        font-weight: 700;
                        color: #1f2937;
                        margin: 0 0 16px 0;
                    ">
                        ${data.title || 'ì»¤ë¦¬í˜ëŸ¼'}
                    </h2>
                    
                    <!-- í•™ìŠµ ì§„í–‰ë„ íŠ¸ë˜ì»¤ -->
                    <div style="
                        background: #f9fafb;
                        border: 1px solid #e5e7eb;
                        border-radius: 12px;
                        padding: 16px;
                        margin-bottom: 20px;
                    ">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                            <h3 style="
                                font-size: 14px;
                                font-weight: 600;
                                color: #374151;
                                margin: 0;
                            ">í•™ìŠµ ì§„í–‰ë„</h3>
                            <span style="
                                font-size: 12px;
                                color: #6b7280;
                                font-weight: 500;
                            ">${Math.round(progressPercentage)}% ì™„ë£Œ</span>
                        </div>
                        
                        <!-- ì§„í–‰ë°” -->
                        <div style="
                            background: #e5e7eb;
                            height: 6px;
                            border-radius: 3px;
                            overflow: hidden;
                            margin-bottom: 16px;
                        ">
                            <div style="
                                background: linear-gradient(90deg, #a855f7, #ec4899);
                                height: 100%;
                                width: ${progressPercentage}%;
                                transition: width 0.3s ease;
                                border-radius: 3px;
                            "></div>
                        </div>
                        
                        <!-- ì£¼ì°¨ë³„ ë‹¨ê³„ í‘œì‹œ -->
                        <div style="
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            gap: 4px;
                            overflow-x: auto;
                            padding: 4px 0;
                        ">
                            ${modules.map((module, index) => {
                                const isCompleted = completedWeeks.includes(index);
                                const weekColor = index < 4 ? '#a855f7' : index < 8 ? '#ec4899' : '#10b981';
                                return `
                                    <div style="
                                        display: flex;
                                        flex-direction: column;
                                        align-items: center;
                                        min-width: 50px;
                                        position: relative;
                                    ">
                                        <div style="
                                            width: 32px;
                                            height: 32px;
                                            border-radius: 50%;
                                            background: ${isCompleted ? weekColor : '#e5e7eb'};
                                            color: ${isCompleted ? 'white' : '#9ca3af'};
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            font-size: 12px;
                                            font-weight: 600;
                                            transition: all 0.3s ease;
                                            cursor: pointer;
                                            border: 2px solid ${isCompleted ? weekColor : '#e5e7eb'};
                                            box-shadow: ${isCompleted ? '0 2px 8px rgba(168, 85, 247, 0.3)' : 'none'};
                                        " onclick="toggleModuleDetail(${index})">
                                            ${isCompleted ? 'âœ“' : (index + 1)}
                                        </div>
                                        <div style="
                                            font-size: 9px;
                                            color: #6b7280;
                                            text-align: center;
                                            margin-top: 4px;
                                            max-width: 40px;
                                            overflow: hidden;
                                            text-overflow: ellipsis;
                                            white-space: nowrap;
                                        ">
                                            ${index + 1}ì£¼ì°¨
                                        </div>
                                        ${index < modules.length - 1 ? `
                                            <div style="
                                                position: absolute;
                                                top: 16px;
                                                right: -27px;
                                                width: 20px;
                                                height: 2px;
                                                background: ${index < completedCount - 1 ? weekColor : '#e5e7eb'};
                                                z-index: 1;
                                            "></div>
                                        ` : ''}
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            // ëª¨ë“ˆ ì¹´ë“œë“¤ì„ ê·¸ë¦¬ë“œë¡œ ë°°ì¹˜ (ë™ì  ë†’ì´, ëª¨ë“  ëª¨ë“ˆ í‘œì‹œ)
            const rows = Math.ceil(modules.length / 4);
            const gridHeight = rows * 120 + (rows - 1) * 12; // ì¹´ë“œ ë†’ì´ 120px + ê°„ê²© 12px
            cardsHtml += `<div id="curriculumGrid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; min-height: ${gridHeight}px; height: auto;">`;
            
            modules.forEach((module, index) => {
                const weekColor = index < 4 ? '#a855f7' : index < 8 ? '#ec4899' : '#10b981';
                cardsHtml += `
                    <div id="card-${index}" class="curriculum-card" style="
                        background: white;
                        border: 1px solid #e5e7eb;
                        border-radius: 8px;
                        padding: 12px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        height: fit-content;
                        min-height: 100px;
                        position: relative;
                        overflow: hidden;
                    " 
                    onmouseover="this.style.borderColor='${weekColor}'; this.style.boxShadow='0 2px 8px rgba(168, 85, 247, 0.1)'"
                    onmouseout="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'"
                    onclick="toggleModuleDetail(${index})">
                        
                        <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 6px;">
                            <div style="
                                background: ${weekColor};
                                color: white;
                                width: 20px;
                                height: 20px;
                                border-radius: 50%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                font-size: 10px;
                                font-weight: 600;
                            ">
                                ${module.week || index + 1}
                            </div>
                            <div style="color: #6b7280; font-size: 10px; font-weight: 500;">
                                ${module.estimated_hours || 8}ì‹œê°„
                            </div>
                        </div>
                        
                        <h3 style="
                            font-size: 12px;
                            font-weight: 600;
                            color: #1f2937;
                            margin: 0 0 6px 0;
                            line-height: 1.3;
                            display: -webkit-box;
                            -webkit-line-clamp: 2;
                            -webkit-box-orient: vertical;
                            overflow: hidden;
                        ">
                            ${module.title || `${index + 1}ì£¼ì°¨ í•™ìŠµ`}
                        </h3>
                        
                        <p id="description-${index}" style="
                            font-size: 10px;
                            color: #6b7280;
                            margin: 0 0 6px 0;
                            line-height: 1.3;
                            display: -webkit-box;
                            -webkit-line-clamp: 2;
                            -webkit-box-orient: vertical;
                            overflow: hidden;
                        ">
                            ${module.description || 'ì´ë²ˆ ì£¼ì°¨ì˜ í•™ìŠµ ë‚´ìš©ì„ ë‹¤ë£¹ë‹ˆë‹¤.'}
                        </p>
                        
                        ${module.key_concepts && module.key_concepts.length > 0 ? `
                            <div id="concepts-${index}" style="margin-top: 4px; display: flex; gap: 2px; flex-wrap: wrap;">
                                ${module.key_concepts.slice(0, 2).map(concept => `
                                    <span style="
                                        background: #f3f4f6;
                                        color: #6b7280;
                                        padding: 2px 4px;
                                        border-radius: 3px;
                                        font-size: 8px;
                                        font-weight: 500;
                                    ">${concept}</span>
                                `).join('')}
                                ${module.key_concepts.length > 2 ? `<span style="color: #9ca3af; font-size: 8px;">+${module.key_concepts.length - 2}</span>` : ''}
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            cardsHtml += '</div>';
            container.innerHTML = cardsHtml;
        }

        // ëª¨ë“ˆ ìƒì„¸ ì •ë³´ ëª¨ë‹¬ í‘œì‹œ
        function toggleModuleDetail(moduleIndex) {
            const curriculumData = JSON.parse(localStorage.getItem('generatedCurriculum') || '{}');
            const module = curriculumData.modules?.[moduleIndex];
            
            if (!module) return;
            
            showModuleModal(module, moduleIndex);
        }
        
        // ëª¨ë“ˆ ëª¨ë‹¬ ìƒì„± ë° í‘œì‹œ
        function showModuleModal(module, moduleIndex) {
            // ê¸°ì¡´ ëª¨ë‹¬ ì œê±°
            const existingModal = document.getElementById('moduleModal');
            if (existingModal) {
                existingModal.remove();
            }
            
            const weekColor = moduleIndex < 4 ? '#a855f7' : moduleIndex < 8 ? '#ec4899' : '#10b981';
            
            // ëª¨ë‹¬ HTML ìƒì„± (í˜„ëŒ€ì  ë””ìì¸)
            const modalHtml = `
                <div id="moduleModal" style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(15, 23, 42, 0.6);
                    backdrop-filter: blur(8px);
                    z-index: 1000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    animation: fadeIn 0.3s ease;
                    padding: 20px;
                " onclick="closeModuleModal(event)">
                    <div style="
                        background: white;
                        border-radius: 20px;
                        width: 100%;
                        max-width: 800px;
                        max-height: 90vh;
                        overflow-y: auto;
                        box-shadow: 0 25px 60px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.05);
                        animation: slideUp 0.3s ease;
                        position: relative;
                    " onclick="event.stopPropagation()">
                        <!-- í—¤ë” -->
                        <div style="
                            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
                            border: 1px solid #e2e8f0;
                            padding: 32px;
                            border-radius: 20px 20px 0 0;
                            position: relative;
                        ">
                            <button onclick="closeModuleModal()" style="
                                position: absolute;
                                top: 20px;
                                right: 20px;
                                background: #f1f5f9;
                                border: 1px solid #e2e8f0;
                                color: #64748b;
                                font-size: 16px;
                                width: 36px;
                                height: 36px;
                                border-radius: 50%;
                                cursor: pointer;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                transition: all 0.2s ease;
                                font-weight: 400;
                            " onmouseover="this.style.background='#e2e8f0'; this.style.color='#475569'" onmouseout="this.style.background='#f1f5f9'; this.style.color='#64748b'">
                                Ã—
                            </button>
                            <div style="
                                background: linear-gradient(135deg, ${weekColor} 0%, ${weekColor}dd 100%);
                                color: white;
                                padding: 8px 16px;
                                border-radius: 12px;
                                font-size: 13px;
                                font-weight: 600;
                                margin-bottom: 16px;
                                display: inline-flex;
                                align-items: center;
                                gap: 6px;
                                box-shadow: 0 2px 8px ${weekColor}30;
                            ">
                                <span style="font-size: 12px;">ğŸ“…</span>
                                Week ${module.week}
                            </div>
                            <h2 style="
                                margin: 0;
                                font-size: 28px;
                                font-weight: 800;
                                line-height: 1.2;
                                color: #1e293b;
                                letter-spacing: -0.025em;
                            ">
                                ${module.title}
                            </h2>
                            <p style="
                                margin: 16px 0 0 0;
                                color: #64748b;
                                font-size: 16px;
                                line-height: 1.6;
                                font-weight: 400;
                            ">
                                ${module.description}
                            </p>
                        </div>
                        
                        <!-- ì»¨í…ì¸  -->
                        <div style="padding: 32px; background: #fafafa; border-top: 1px solid #f1f5f9;">
                            ${module.objectives ? `
                                <div style="
                                    background: white;
                                    border-radius: 16px;
                                    padding: 24px;
                                    margin-bottom: 24px;
                                    border: 1px solid #e2e8f0;
                                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
                                ">
                                    <h3 style="
                                        font-size: 20px;
                                        font-weight: 700;
                                        color: #1e293b;
                                        margin-bottom: 20px;
                                        display: flex;
                                        align-items: center;
                                        gap: 12px;
                                    ">
                                        <span style="
                                            background: linear-gradient(135deg, ${weekColor}20, ${weekColor}10);
                                            color: ${weekColor};
                                            width: 36px;
                                            height: 36px;
                                            border-radius: 12px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            font-size: 16px;
                                        ">ğŸ¯</span>
                                        í•™ìŠµ ëª©í‘œ
                                    </h3>
                                    <div style="
                                        display: grid;
                                        gap: 12px;
                                    ">
                                        ${module.objectives.map((obj, idx) => `
                                            <div style="
                                                background: #f8fafc;
                                                border: 1px solid #f1f5f9;
                                                border-left: 4px solid ${weekColor};
                                                padding: 16px;
                                                border-radius: 0 12px 12px 0;
                                                color: #475569;
                                                line-height: 1.6;
                                                font-weight: 500;
                                                position: relative;
                                            ">
                                                <div style="
                                                    position: absolute;
                                                    top: -8px;
                                                    left: 12px;
                                                    background: ${weekColor};
                                                    color: white;
                                                    width: 24px;
                                                    height: 24px;
                                                    border-radius: 50%;
                                                    display: flex;
                                                    align-items: center;
                                                    justify-content: center;
                                                    font-size: 12px;
                                                    font-weight: 700;
                                                ">${idx + 1}</div>
                                                <div style="margin-top: 8px;">
                                                    ${obj}
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${module.key_concepts && module.key_concepts.length > 0 ? `
                                <div style="
                                    background: white;
                                    border-radius: 16px;
                                    padding: 24px;
                                    margin-bottom: 24px;
                                    border: 1px solid #e2e8f0;
                                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
                                ">
                                    <h3 style="
                                        font-size: 20px;
                                        font-weight: 700;
                                        color: #1e293b;
                                        margin-bottom: 20px;
                                        display: flex;
                                        align-items: center;
                                        gap: 12px;
                                    ">
                                        <span style="
                                            background: linear-gradient(135deg, ${weekColor}20, ${weekColor}10);
                                            color: ${weekColor};
                                            width: 36px;
                                            height: 36px;
                                            border-radius: 12px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            font-size: 16px;
                                        ">ğŸ”‘</span>
                                        í•µì‹¬ ê°œë…
                                    </h3>
                                    <div style="
                                        display: grid;
                                        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
                                        gap: 16px;
                                    ">
                                        ${module.key_concepts.map((concept, idx) => `
                                            <div style="
                                                background: linear-gradient(135deg, ${weekColor}08, ${weekColor}03);
                                                border: 2px solid ${weekColor}15;
                                                color: #475569;
                                                padding: 16px 20px;
                                                border-radius: 12px;
                                                font-size: 15px;
                                                font-weight: 600;
                                                text-align: center;
                                                position: relative;
                                                transition: all 0.2s ease;
                                                cursor: default;
                                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px ${weekColor}20'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                                <div style="
                                                    position: absolute;
                                                    top: -10px;
                                                    right: 8px;
                                                    background: ${weekColor};
                                                    color: white;
                                                    width: 20px;
                                                    height: 20px;
                                                    border-radius: 50%;
                                                    display: flex;
                                                    align-items: center;
                                                    justify-content: center;
                                                    font-size: 11px;
                                                    font-weight: 700;
                                                ">${idx + 1}</div>
                                                ${concept}
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${module.resources ? `
                                <div style="
                                    background: white;
                                    border-radius: 16px;
                                    padding: 24px;
                                    border: 1px solid #e2e8f0;
                                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
                                ">
                                    <h3 style="
                                        font-size: 20px;
                                        font-weight: 700;
                                        color: #1e293b;
                                        margin-bottom: 24px;
                                        display: flex;
                                        align-items: center;
                                        gap: 12px;
                                    ">
                                        <span style="
                                            background: linear-gradient(135deg, ${weekColor}20, ${weekColor}10);
                                            color: ${weekColor};
                                            width: 36px;
                                            height: 36px;
                                            border-radius: 12px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            font-size: 16px;
                                        ">ğŸ“š</span>
                                        í•™ìŠµ ìë£Œ
                                    </h3>
                                    
                                    <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
                                    <div style="
                                        display: flex;
                                        gap: 8px;
                                        margin-bottom: 20px;
                                        border-bottom: 1px solid #f1f5f9;
                                        padding-bottom: 16px;
                                    ">
                                        ${module.resources.videos && module.resources.videos.length > 0 ? `
                                            <div style="
                                                background: linear-gradient(135deg, #fef3c7, #fde68a);
                                                color: #92400e;
                                                padding: 8px 16px;
                                                border-radius: 8px;
                                                font-size: 13px;
                                                font-weight: 600;
                                                display: flex;
                                                align-items: center;
                                                gap: 6px;
                                            ">
                                                ğŸ“¹ ë™ì˜ìƒ ${module.resources.videos.length}ê°œ
                                            </div>
                                        ` : ''}
                                        ${module.resources.web_links && module.resources.web_links.length > 0 ? `
                                            <div style="
                                                background: linear-gradient(135deg, #dbeafe, #bfdbfe);
                                                color: #1e40af;
                                                padding: 8px 16px;
                                                border-radius: 8px;
                                                font-size: 13px;
                                                font-weight: 600;
                                                display: flex;
                                                align-items: center;
                                                gap: 6px;
                                            ">
                                                ğŸŒ ì›¹ìë£Œ ${module.resources.web_links.length}ê°œ
                                            </div>
                                        ` : ''}
                                        ${module.resources.documents && module.resources.documents.length > 0 ? `
                                            <div style="
                                                background: linear-gradient(135deg, #ecfdf5, #d1fae5);
                                                color: #065f46;
                                                padding: 8px 16px;
                                                border-radius: 8px;
                                                font-size: 13px;
                                                font-weight: 600;
                                                display: flex;
                                                align-items: center;
                                                gap: 6px;
                                            ">
                                                ğŸ“„ ë¬¸ì„œ ${module.resources.documents.length}ê°œ
                                            </div>
                                        ` : ''}
                                    </div>
                                    
                                    <!-- ë¦¬ì†ŒìŠ¤ ë¦¬ìŠ¤íŠ¸ -->
                                    <div style="display: grid; gap: 20px;">
                                        ${module.resources.videos && module.resources.videos.length > 0 ? `
                                            <div>
                                                <h4 style="
                                                    font-size: 17px;
                                                    font-weight: 700;
                                                    color: #374151;
                                                    margin-bottom: 12px;
                                                    display: flex;
                                                    align-items: center;
                                                    gap: 8px;
                                                ">
                                                    <span style="color: #f59e0b;">ğŸ“¹</span>
                                                    ë™ì˜ìƒ ê°•ì˜
                                                </h4>
                                                <div style="display: grid; gap: 10px;">
                                                    ${module.resources.videos.map((video, idx) => `
                                                        <a href="${video.url}" target="_blank" style="
                                                            display: flex;
                                                            align-items: center;
                                                            gap: 12px;
                                                            background: linear-gradient(135deg, #fffbeb, #fef3c7);
                                                            border: 1px solid #fed7aa;
                                                            border-radius: 12px;
                                                            padding: 16px;
                                                            text-decoration: none;
                                                            color: #92400e;
                                                            transition: all 0.2s ease;
                                                            position: relative;
                                                            overflow: hidden;
                                                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(245, 158, 11, 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                                            <div style="
                                                                background: #f59e0b;
                                                                color: white;
                                                                width: 32px;
                                                                height: 32px;
                                                                border-radius: 8px;
                                                                display: flex;
                                                                align-items: center;
                                                                justify-content: center;
                                                                font-weight: 700;
                                                                font-size: 12px;
                                                                flex-shrink: 0;
                                                            ">${idx + 1}</div>
                                                            <div style="flex: 1;">
                                                                <div style="font-weight: 600; font-size: 15px; line-height: 1.4;">
                                                                    ${video.title}
                                                                </div>
                                                            </div>
                                                            <div style="
                                                                background: rgba(245, 158, 11, 0.2);
                                                                color: #92400e;
                                                                padding: 4px 8px;
                                                                border-radius: 6px;
                                                                font-size: 11px;
                                                                font-weight: 600;
                                                            ">â–¶ ì¬ìƒ</div>
                                                        </a>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        ` : ''}
                                        
                                        ${module.resources.web_links && module.resources.web_links.length > 0 ? `
                                            <div>
                                                <h4 style="
                                                    font-size: 17px;
                                                    font-weight: 700;
                                                    color: #374151;
                                                    margin-bottom: 12px;
                                                    display: flex;
                                                    align-items: center;
                                                    gap: 8px;
                                                ">
                                                    <span style="color: #3b82f6;">ğŸŒ</span>
                                                    ì›¹ ìë£Œ
                                                </h4>
                                                <div style="display: grid; gap: 10px;">
                                                    ${module.resources.web_links.map((link, idx) => `
                                                        <a href="${link.url}" target="_blank" style="
                                                            display: flex;
                                                            align-items: center;
                                                            gap: 12px;
                                                            background: linear-gradient(135deg, #eff6ff, #dbeafe);
                                                            border: 1px solid #93c5fd;
                                                            border-radius: 12px;
                                                            padding: 16px;
                                                            text-decoration: none;
                                                            color: #1e40af;
                                                            transition: all 0.2s ease;
                                                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(59, 130, 246, 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                                            <div style="
                                                                background: #3b82f6;
                                                                color: white;
                                                                width: 32px;
                                                                height: 32px;
                                                                border-radius: 8px;
                                                                display: flex;
                                                                align-items: center;
                                                                justify-content: center;
                                                                font-weight: 700;
                                                                font-size: 12px;
                                                                flex-shrink: 0;
                                                            ">${idx + 1}</div>
                                                            <div style="flex: 1;">
                                                                <div style="font-weight: 600; font-size: 15px; line-height: 1.4;">
                                                                    ${link.title}
                                                                </div>
                                                            </div>
                                                            <div style="
                                                                background: rgba(59, 130, 246, 0.2);
                                                                color: #1e40af;
                                                                padding: 4px 8px;
                                                                border-radius: 6px;
                                                                font-size: 11px;
                                                                font-weight: 600;
                                                            ">ğŸ”— ë§í¬</div>
                                                        </a>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        ` : ''}
                                        
                                        ${module.resources.documents && module.resources.documents.length > 0 ? `
                                            <div>
                                                <h4 style="
                                                    font-size: 17px;
                                                    font-weight: 700;
                                                    color: #374151;
                                                    margin-bottom: 12px;
                                                    display: flex;
                                                    align-items: center;
                                                    gap: 8px;
                                                ">
                                                    <span style="color: #10b981;">ğŸ“„</span>
                                                    ë¬¸ì„œ ìë£Œ
                                                </h4>
                                                <div style="display: grid; gap: 10px;">
                                                    ${module.resources.documents.map((doc, idx) => `
                                                        <a href="${doc.url}" target="_blank" style="
                                                            display: flex;
                                                            align-items: center;
                                                            gap: 12px;
                                                            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
                                                            border: 1px solid #86efac;
                                                            border-radius: 12px;
                                                            padding: 16px;
                                                            text-decoration: none;
                                                            color: #065f46;
                                                            transition: all 0.2s ease;
                                                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(16, 185, 129, 0.15)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">
                                                            <div style="
                                                                background: #10b981;
                                                                color: white;
                                                                width: 32px;
                                                                height: 32px;
                                                                border-radius: 8px;
                                                                display: flex;
                                                                align-items: center;
                                                                justify-content: center;
                                                                font-weight: 700;
                                                                font-size: 12px;
                                                                flex-shrink: 0;
                                                            ">${idx + 1}</div>
                                                            <div style="flex: 1;">
                                                                <div style="font-weight: 600; font-size: 15px; line-height: 1.4;">
                                                                    ${doc.title}
                                                                </div>
                                                            </div>
                                                            <div style="
                                                                background: rgba(16, 185, 129, 0.2);
                                                                color: #065f46;
                                                                padding: 4px 8px;
                                                                border-radius: 6px;
                                                                font-size: 11px;
                                                                font-weight: 600;
                                                            ">ğŸ“ ë‹¤ìš´ë¡œë“œ</div>
                                                        </a>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        ` : ''}
                                    </div>
                                </div>
                            ` : ''}
                            
                            <!-- í•™ìŠµ ì™„ë£Œ ì²´í¬ë°•ìŠ¤ -->
                            <div style="
                                margin-top: 24px;
                                background: white;
                                border-radius: 16px;
                                padding: 24px;
                                border: 1px solid #e2e8f0;
                                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
                                text-align: center;
                            ">
                                ${(() => {
                                    const completedWeeks = JSON.parse(localStorage.getItem('curriculumProgress') || '[]');
                                    const isCompleted = completedWeeks.includes(moduleIndex);
                                    return `
                                        <div style="
                                            background: ${isCompleted ? 'linear-gradient(135deg, #dcfce7, #bbf7d0)' : 'linear-gradient(135deg, #f8fafc, #e2e8f0)'};
                                            border: 2px solid ${isCompleted ? '#10b981' : '#cbd5e1'};
                                            border-radius: 16px;
                                            padding: 20px;
                                            margin-bottom: 16px;
                                            transition: all 0.3s ease;
                                            cursor: pointer;
                                        " onclick="document.getElementById('completeWeek-${moduleIndex}').click()">
                                            <div style="
                                                display: flex;
                                                align-items: center;
                                                justify-content: center;
                                                gap: 16px;
                                                margin-bottom: 12px;
                                            ">
                                                <div style="
                                                    position: relative;
                                                    width: 28px;
                                                    height: 28px;
                                                ">
                                                    <input 
                                                        type="checkbox" 
                                                        id="completeWeek-${moduleIndex}"
                                                        ${isCompleted ? 'checked' : ''}
                                                        onchange="toggleWeekCompletion(${moduleIndex})"
                                                        style="
                                                            width: 28px;
                                                            height: 28px;
                                                            accent-color: ${weekColor};
                                                            cursor: pointer;
                                                            border-radius: 8px;
                                                        "
                                                    />
                                                </div>
                                                <div>
                                                    <div style="
                                                        font-size: 18px;
                                                        font-weight: 700;
                                                        color: ${isCompleted ? '#065f46' : '#475569'};
                                                        margin-bottom: 4px;
                                                        display: flex;
                                                        align-items: center;
                                                        gap: 8px;
                                                    ">
                                                        <span style="font-size: 20px;">
                                                            ${isCompleted ? 'âœ…' : 'ğŸ“š'}
                                                        </span>
                                                        ${isCompleted ? 'í•™ìŠµ ì™„ë£Œë¨' : 'í•™ìŠµ ì™„ë£Œí•˜ê¸°'}
                                                    </div>
                                                    <div style="
                                                        font-size: 13px;
                                                        color: ${isCompleted ? '#059669' : '#64748b'};
                                                        font-weight: 500;
                                                    ">
                                                        ${isCompleted ? 'ì´ ì£¼ì°¨ì˜ ëª¨ë“  í•™ìŠµì„ ë§ˆì³¤ìŠµë‹ˆë‹¤' : 'í•™ìŠµì„ ì™„ë£Œí•˜ë©´ ì²´í¬í•´ì£¼ì„¸ìš”'}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        ${isCompleted ? `
                                            <div style="
                                                background: linear-gradient(135deg, #059669, #10b981);
                                                color: white;
                                                padding: 12px 20px;
                                                border-radius: 12px;
                                                font-size: 14px;
                                                font-weight: 600;
                                                text-align: center;
                                            ">
                                                ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! Week ${module.week} í•™ìŠµì„ ì™„ë£Œí•˜ì…¨ìŠµë‹ˆë‹¤!
                                            </div>
                                        ` : `
                                            <div style="
                                                background: #f8fafc;
                                                border: 1px dashed #cbd5e1;
                                                color: #64748b;
                                                padding: 16px;
                                                border-radius: 12px;
                                                font-size: 13px;
                                                line-height: 1.5;
                                                text-align: center;
                                            ">
                                                ëª¨ë“  í•™ìŠµ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ì…¨ë‹¤ë©´ ìœ„ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.<br>
                                                <strong>ì§„í–‰ë„ê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸</strong>ë˜ì–´ ì „ì²´ í•™ìŠµ í˜„í™©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                            </div>
                                        `}
                                    `;
                                })()}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // ëª¨ë‹¬ì„ bodyì— ì¶”ê°€
            document.body.insertAdjacentHTML('beforeend', modalHtml);
        }
        
        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModuleModal(event) {
            if (event && event.target !== event.currentTarget) return;
            
            const modal = document.getElementById('moduleModal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
        }
        
        // ì£¼ì°¨ ì™„ë£Œ ìƒíƒœ í† ê¸€
        function toggleWeekCompletion(moduleIndex) {
            const completedWeeks = JSON.parse(localStorage.getItem('curriculumProgress') || '[]');
            const isCurrentlyCompleted = completedWeeks.includes(moduleIndex);
            
            if (isCurrentlyCompleted) {
                // ì™„ë£Œ í•´ì œ
                const updatedWeeks = completedWeeks.filter(week => week !== moduleIndex);
                localStorage.setItem('curriculumProgress', JSON.stringify(updatedWeeks));
                showNotification(`${moduleIndex + 1}ì£¼ì°¨ ì™„ë£Œ ìƒíƒœê°€ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'info');
            } else {
                // ì™„ë£Œ ì¶”ê°€
                const updatedWeeks = [...completedWeeks, moduleIndex].sort((a, b) => a - b);
                localStorage.setItem('curriculumProgress', JSON.stringify(updatedWeeks));
                showNotification(`ğŸ‰ ${moduleIndex + 1}ì£¼ì°¨ë¥¼ ì™„ë£Œí•˜ì…¨ìŠµë‹ˆë‹¤!`, 'success');
                
                // ì™„ë£Œ íš¨ê³¼ ì• ë‹ˆë©”ì´ì…˜
                setTimeout(() => {
                    const checkbox = document.getElementById(`completeWeek-${moduleIndex}`);
                    if (checkbox) {
                        checkbox.style.transform = 'scale(1.2)';
                        setTimeout(() => {
                            checkbox.style.transform = 'scale(1)';
                        }, 200);
                    }
                }, 100);
            }
            
            // ëª¨ë‹¬ ë‚´ìš© ì—…ë°ì´íŠ¸
            setTimeout(() => {
                closeModuleModal();
                const curriculumData = JSON.parse(localStorage.getItem('generatedCurriculum') || '{}');
                const module = curriculumData.modules?.[moduleIndex];
                if (module) {
                    showModuleModal(module, moduleIndex);
                }
            }, 300);
            
            // ì „ì²´ ì»¤ë¦¬í˜ëŸ¼ ì§„í–‰ë„ ì—…ë°ì´íŠ¸
            updateCurriculumProgress();
        }
        
        // ì»¤ë¦¬í˜ëŸ¼ ì§„í–‰ë„ ì—…ë°ì´íŠ¸
        function updateCurriculumProgress() {
            const curriculumContent = document.getElementById('curriculumContent');
            if (curriculumContent && curriculumContent.style.display === 'block') {
                const curriculumData = JSON.parse(localStorage.getItem('generatedCurriculum') || '{}');
                if (curriculumData.modules) {
                    displayCurriculumCards(curriculumContent, curriculumData);
                }
            }
        }
        
        // ì§„í–‰ë„ ì´ˆê¸°í™” (ìƒˆ ì„¸ì…˜ì´ë‚˜ ì»¤ë¦¬í˜ëŸ¼ ì¬ìƒì„± ì‹œ)
        function resetCurriculumProgress() {
            localStorage.removeItem('curriculumProgress');
            updateCurriculumProgress();
        }

        // ì„ íƒëœ ë©˜í† ë“¤ ì €ì¥ ë°°ì—´
        let selectedMentors = [];

        // ìì—°ì–´ ì§ˆë¬¸ìœ¼ë¡œ ë©˜í†  ì°¾ê¸°
        function findMentorByQuestion() {
            const question = document.getElementById('naturalQuestionInput').value.trim();
            if (!question) {
                showNotification('ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
                return;
            }
            
            // ê°„ë‹¨í•œ í‚¤ì›Œë“œ ë§¤ì¹­ ë¡œì§ (ì‹¤ì œë¡œëŠ” AIê°€ ì²˜ë¦¬)
            let suggestedMentors = [];
            
            if (question.includes('ê°œë°œ') || question.includes('í”„ë¡œê·¸ë˜ë°') || question.includes('ì½”ë”©')) {
                suggestedMentors.push('designer');
            }
            if (question.includes('ê²½ì˜') || question.includes('ì „ëµ') || question.includes('ë¹„ì¦ˆë‹ˆìŠ¤')) {
                suggestedMentors.push('executive');
            }
            if (question.includes('ì—…ë¬´') || question.includes('ì‹¤ë¬´') || question.includes('ìŠ¤í‚¬')) {
                suggestedMentors.push('engineer');
            }
            if (question.includes('ì˜ì–´') || question.includes('íšŒí™”') || question.includes('ë¹„ì¦ˆë‹ˆìŠ¤') || question.includes('ì´ë©”ì¼') || question.includes('ë©´ì ‘')) {
                suggestedMentors.push('datascientist');
            }
            if (question.includes('ìš´ì„¸') || question.includes('ì‚¬ì£¼') || question.includes('ê´€ìƒ') || question.includes('ì§ì¥') || question.includes('ìƒì‚¬') || question.includes('ë™ë£Œ') || question.includes('ìŠ¹ì§„') || question.includes('ì´ì§')) {
                suggestedMentors.push('marketing');
            }
            if (question.includes('í•™ìŠµ') || question.includes('ê³µë¶€') || question.includes('êµìœ¡') || question.includes('ê°€ë¥´ì³')) {
                suggestedMentors.push('professor');
            }
            
            // ê¸°ë³¸ê°’
            if (suggestedMentors.length === 0) {
                suggestedMentors = ['designer', 'professor'];
            }
            
            // ì¶”ì²œëœ ë©˜í† ë“¤ ìë™ ì„ íƒ
            suggestedMentors.forEach(mentor => {
                selectMentor(mentor);
            });
            
            showNotification(`ì§ˆë¬¸ì— ì í•©í•œ ${suggestedMentors.length}ëª…ì˜ ë©˜í† ë¥¼ ì¶”ì²œí–ˆìŠµë‹ˆë‹¤!`, 'success');
        }

        // ë©˜í†  ì„ íƒ
        function selectMentor(mentorType) {
            if (selectedMentors.includes(mentorType)) return;
            
            selectedMentors.push(mentorType);
            updateSelectedMentorsDisplay();
            updateStartButton();
            
            // ì„ íƒëœ ì¹´ë“œ ìŠ¤íƒ€ì¼ ë³€ê²½
            const card = document.querySelector(`[data-mentor="${mentorType}"]`);
            if (card) {
                card.style.borderColor = '#667eea';
                card.style.backgroundColor = '#f0f4ff';
            }
        }

        // ë©˜í†  ì„ íƒ í•´ì œ
        function deselectMentor(mentorType) {
            selectedMentors = selectedMentors.filter(m => m !== mentorType);
            updateSelectedMentorsDisplay();
            updateStartButton();
            
            // ì¹´ë“œ ìŠ¤íƒ€ì¼ ì›ë˜ëŒ€ë¡œ
            const card = document.querySelector(`[data-mentor="${mentorType}"]`);
            if (card) {
                card.style.borderColor = '#e5e7eb';
                card.style.backgroundColor = 'white';
            }
        }

        // ì„ íƒëœ ë©˜í† ë“¤ í™”ë©´ ì—…ë°ì´íŠ¸
        function updateSelectedMentorsDisplay() {
            const container = document.getElementById('selectedMentors');
            if (!container) return;
            
            if (selectedMentors.length === 0) {
                container.innerHTML = '<div style="color: #6b7280; font-size: 14px;">ì„ íƒëœ ë©˜í† ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>';
                return;
            }
            
            const mentorNames = {
                engineer: { name: 'ì—…ë¬´ ê³¼ì™¸ ì„ ìƒë‹˜', icon: 'ğŸ”§', desc: 'ì‹¤ë¬´ ìŠ¤í‚¬' },
                executive: { name: 'ì¼íƒ€ ê°•ì‚¬', icon: 'ğŸ’¼', desc: 'í•µì‹¬ ì„¤ëª…' },
                professor: { name: 'êµìˆ˜', icon: 'ğŸ“', desc: 'í•™ìŠµ ì§€ì›' },
                designer: { name: 'ê°œë°œì', icon: 'ğŸ’»', desc: 'í”„ë¡œê·¸ë˜ë°' },
                datascientist: { name: 'ì˜ì–´ ì„ ìƒë‹˜', icon: 'ğŸ—£ï¸', desc: 'ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ì–´' },
                marketing: { name: 'ëª…ë¦¬í•™ì', icon: 'ğŸ”®', desc: 'ì§ì¥ ìš´ì„¸' }
            };
            
            const mentorCards = selectedMentors.map(mentorType => {
                const mentor = mentorNames[mentorType];
                return `
                    <div style="
                        display: inline-block;
                        background: linear-gradient(135deg, #667eea, #764ba2);
                        color: white;
                        padding: 12px 20px;
                        border-radius: 20px;
                        margin: 5px;
                        font-size: 14px;
                        position: relative;
                    ">
                        <span style="margin-right: 8px;">${mentor.icon}</span>
                        <strong>${mentor.name}</strong>
                        <button onclick="deselectMentor('${mentorType}')" style="
                            background: none;
                            border: none;
                            color: white;
                            margin-left: 10px;
                            cursor: pointer;
                            font-size: 16px;
                            padding: 0;
                        ">Ã—</button>
                    </div>
                `;
            }).join('');
            
            container.innerHTML = mentorCards;
        }

        // ì‹œì‘ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
        function updateStartButton() {
            const btn = document.getElementById('startMentoringBtn');
            if (!btn) return;
            
            if (selectedMentors.length > 0) {
                btn.style.opacity = '1';
                btn.style.pointerEvents = 'auto';
                btn.disabled = false;
            } else {
                btn.style.opacity = '0.5';
                btn.style.pointerEvents = 'none';
                btn.disabled = true;
            }
        }

        // ë©˜í† ë§ ì‹œì‘
        function startMentoring() {
            if (selectedMentors.length === 0) return;
            
            // ìƒì„¸ í”„ë¡œí•„ ì„¹ì…˜ ìƒì„±
            createMentorProfileSection();
            
            // ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤
            setTimeout(() => {
                const profileSection = document.getElementById('mentorProfileSection');
                if (profileSection) {
                    profileSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }, 100);
        }

        // ë©˜í†  ìƒì„¸ í”„ë¡œí•„ ì„¹ì…˜ ìƒì„±
        function createMentorProfileSection() {
            // ê¸°ì¡´ ì„¹ì…˜ì´ ìˆë‹¤ë©´ ì œê±°
            const existing = document.getElementById('mentorProfileSection');
            if (existing) {
                existing.remove();
            }
            
            // ë©˜í†  ìƒì„¸ ì •ë³´ ì •ì˜
            const mentorProfiles = {
                engineer: {
                    name: 'ì—…ë¬´ ê³¼ì™¸ ì„ ìƒë‹˜',
                    title: 'ì‹¤ë¬´ ì „ë¬¸ ë©˜í† ',
                    affiliation: 'í˜„ì—… ì‹¤ë¬´ì§„',
                    expertise: 'ì—…ë¬´ íš¨ìœ¨ì„± í–¥ìƒ, ì‹¤ë¬´ ë„êµ¬ í™œìš©, ë¬¸ì œ í•´ê²° ë°©ë²•ë¡  ë° í”„ë¡œì„¸ìŠ¤ ìµœì í™”ì— ëŒ€í•œ ì „ë¬¸ì ì¸ ì§€ì‹ì„ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤.',
                    description: 'í˜„ì¥ì—ì„œ ë°”ë¡œ ì¨ë¨¹ì„ ìˆ˜ ìˆëŠ” ì‹¤ìš©ì ì¸ ìŠ¤í‚¬ê³¼ ë…¸í•˜ìš°ë¥¼ ì „ìˆ˜í•©ë‹ˆë‹¤. ë³µì¡í•œ ì—…ë¬´ë¥¼ ë‹¨ìˆœí•˜ê²Œ í’€ì–´ë‚´ëŠ” ë°©ë²•ì„ ì•Œë ¤ë“œë ¤ìš”.'
                },
                executive: {
                    name: 'ì¼íƒ€ ê°•ì‚¬',
                    title: 'í•µì‹¬ ìš”ì•½ ì „ë¬¸ê°€',
                    affiliation: 'ì „ë¬¸ êµìœ¡ ê¸°ê´€',
                    expertise: 'ë³µì¡í•œ ê°œë…ì˜ í•µì‹¬ ìš”ì•½, ì „ëµì  ì‚¬ê³  ë°©ì‹, ì˜ì‚¬ê²°ì • í”„ë¡œì„¸ìŠ¤ ë° ê° ë¶„ì•¼ë³„ ì „ë¬¸ ì§€ì‹ ì»¨ì„¤íŒ…ì„ ì œê³µí•©ë‹ˆë‹¤.',
                    description: 'ë³µì¡í•œ ë‚´ìš©ì„ í•µì‹¬ë§Œ ì™ì™ ë½‘ì•„ ëª…ì¾Œí•˜ê²Œ ì„¤ëª…í•´ë“œë¦½ë‹ˆë‹¤. ì‹œê°„ ì—†ëŠ” ë‹¹ì‹ ì„ ìœ„í•œ íš¨ìœ¨ì  í•™ìŠµì„ ì œê³µí•´ìš”.'
                },
                professor: {
                    name: 'êµìˆ˜',
                    title: 'í•™ìˆ  ì—°êµ¬ ì „ë¬¸ê°€',
                    affiliation: 'ëŒ€í•™êµ êµìˆ˜ì§„',
                    expertise: 'ì²´ê³„ì ì¸ êµìœ¡ê³¼ì • ì„¤ê³„, í•™ìˆ  ì—°êµ¬ ë°©ë²•ë¡ , ì´ë¡ ê³¼ ì‹¤ìŠµì˜ ê· í˜•ì¡íŒ ì ‘ê·¼ ë° ì‹¬í™” í•™ìŠµ ë¡œë“œë§µì„ ì œê³µí•©ë‹ˆë‹¤.',
                    description: 'í•™ë¬¸ì  ê¹Šì´ì™€ ì²´ê³„ì ì¸ ì ‘ê·¼ìœ¼ë¡œ íƒ„íƒ„í•œ ê¸°ì´ˆë¶€í„° ê³ ê¸‰ ì´ë¡ ê¹Œì§€ ë‹¨ê³„ë³„ë¡œ ê°€ë¥´ì³ë“œë¦½ë‹ˆë‹¤.'
                },
                designer: {
                    name: 'ê°œë°œì',
                    title: 'í”„ë¡œê·¸ë˜ë° ì‹¤ìŠµ ë©˜í† ',
                    affiliation: 'ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œíŒ€',
                    expertise: 'í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë³„ ì‹¤ìŠµ, ì½”ë“œ ë¦¬ë·° ë° ìµœì í™”, ê°œë°œ í”„ë¡œì íŠ¸ ë©˜í† ë§ ë° ê¸°ìˆ  ë¬¸ì„œ í™œìš©ë²•ì„ ì „ë¬¸ì ìœ¼ë¡œ ì§€ë„í•©ë‹ˆë‹¤.',
                    description: 'ì‹¤ì œ ê°œë°œ í˜„ì¥ì˜ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì²´ê³„ì ì¸ í”„ë¡œê·¸ë˜ë° ìŠ¤í‚¬ì„ ê°€ë¥´ì³ë“œë¦½ë‹ˆë‹¤. ì´ë¡ ë³´ë‹¤ëŠ” ì‹¤ìŠµ ì¤‘ì‹¬ì˜ í•™ìŠµì„ ì œê³µí•´ìš”.'
                },
                datascientist: {
                    name: 'ì˜ì–´ ì„ ìƒë‹˜',
                    title: 'ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ì–´ ì „ë¬¸ê°€',
                    affiliation: 'ì–´í•™ì›',
                    expertise: 'ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ì–´ íšŒí™”, ì˜ë¬¸ ì´ë©”ì¼ ì‘ì„±ë²•, í”„ë ˆì  í…Œì´ì…˜ ìŠ¤í‚¬, ì˜ì–´ ë©´ì ‘ ëŒ€ë¹„ ë° êµ­ì œ ì—…ë¬´ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì„ ì „ë¬¸ì ìœ¼ë¡œ ì§€ë„í•©ë‹ˆë‹¤.',
                    description: 'ì‹¤ë¬´ì—ì„œ ë°”ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ì–´ë¥¼ ê°€ë¥´ì³ë“œë¦½ë‹ˆë‹¤. ê¸€ë¡œë²Œ ë¹„ì¦ˆë‹ˆìŠ¤ í™˜ê²½ì—ì„œ ìì‹ ê° ìˆê²Œ ì†Œí†µí•  ìˆ˜ ìˆë„ë¡ ë„ì™€ë“œë ¤ìš”.'
                },
                marketing: {
                    name: 'ëª…ë¦¬í•™ì',
                    title: 'ì§ì¥ì¸ ì „ë¬¸ ëª…ë¦¬í•™ì',
                    affiliation: 'í˜„ëŒ€ì² í•™ê´€',
                    expertise: 'ì§ì¥ ë‚´ ì¸ê°„ê´€ê³„ ìš´ì„¸, ìƒì‚¬ì™€ ë™ë£Œ ê´€ìƒ ë¶„ì„, ìŠ¹ì§„ ì‹œê¸° ì˜ˆì¸¡, ì´ì§ ìš´ íƒ€ì´ë°, íšŒì‚¬ ìƒí™œ ë§ì¶¤ ì‚¬ì£¼í’€ì´ ë° ì˜¤ëŠ˜ì˜ ì—…ë¬´ ìš´ì„¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.',
                    description: 'íšŒì‚¬ìƒí™œì´ í˜ë“œì‹œë‚˜ìš”? ì˜¤ëŠ˜ ìƒì‚¬ ê¸°ë¶„ì´ ì–´ë–¨ì§€, ë™ë£Œë“¤ê³¼ì˜ ê´€ê³„ëŠ” ì–´ë–»ê²Œ í’€ì–´ê°ˆì§€ ëª…ë¦¬í•™ìœ¼ë¡œ ì¬ë¯¸ìˆê²Œ ì•Œì•„ë³´ì„¸ìš”. ì§ì¥ ìƒí™œì˜ ê³ ë¯¼ì„ ìš´ì„¸ë¡œ í’€ì–´ë“œë ¤ìš”!'
                }
            };
            
            // í”„ë¡œí•„ ì„¹ì…˜ ìƒì„±
            const profileSection = document.createElement('div');
            profileSection.id = 'mentorProfileSection';
            profileSection.style.cssText = `
                background: white;
                border-radius: 16px;
                box-shadow: 0 4px 24px rgba(0,0,0,0.1);
                padding: 40px;
                margin: 40px auto;
                width: 900px;
                max-width: 95%;
            `;
            
            // ì„ íƒëœ ë©˜í† ë“¤ì˜ í”„ë¡œí•„ ì¹´ë“œ ìƒì„±
            const profileCards = selectedMentors.map(mentorType => {
                const profile = mentorProfiles[mentorType];
                return `
                    <div class="mentor-profile-card" data-mentor="${mentorType}" style="
                        background: white;
                        border: 1px solid #e2e8f0;
                        border-radius: 12px;
                        padding: 24px;
                        transition: all 0.3s ease;
                        position: relative;
                        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                        height: fit-content;
                    " onmouseover="this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)'" 
                       onmouseout="this.style.boxShadow='0 1px 3px rgba(0, 0, 0, 0.1)'">
                        
                        <!-- í”„ë¡œí•„ í—¤ë” -->
                        <div style="display: flex; align-items: flex-start; margin-bottom: 20px;">
                            <div style="
                                width: 56px;
                                height: 56px;
                                background: linear-gradient(135deg, #3b82f6, #1e40af);
                                border-radius: 8px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                font-size: 18px;
                                margin-right: 16px;
                                color: white;
                                font-weight: 600;
                            ">${profile.name.charAt(0)}</div>
                            
                            <div style="flex: 1;">
                                <h3 style="
                                    font-size: 18px;
                                    font-weight: 600;
                                    color: #1f2937;
                                    margin: 0 0 4px 0;
                                ">${profile.name}</h3>
                                <p style="
                                    font-size: 14px;
                                    font-weight: 500;
                                    color: #6b7280;
                                    margin: 0 0 8px 0;
                                ">${profile.title}</p>
                                <div style="
                                    display: inline-block;
                                    background: #f3f4f6;
                                    color: #374151;
                                    font-size: 12px;
                                    font-weight: 500;
                                    padding: 4px 8px;
                                    border-radius: 6px;
                                ">${profile.affiliation}</div>
                            </div>
                            
                            <!-- ì„ íƒ ì²´í¬ë°•ìŠ¤ -->
                            <div style="margin-left: 16px;">
                                <input type="checkbox" id="final-select-${mentorType}" 
                                       onchange="toggleFinalMentorSelection('${mentorType}')"
                                       style="
                                           width: 18px;
                                           height: 18px;
                                           cursor: pointer;
                                           accent-color: #3b82f6;
                                       " checked>
                            </div>
                        </div>
                        
                        <!-- ì „ë¬¸ ë¶„ì•¼ -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="
                                font-size: 13px;
                                font-weight: 600;
                                color: #374151;
                                margin: 0 0 8px 0;
                            ">My expertise</h4>
                            <p style="
                                font-size: 14px;
                                color: #6b7280;
                                line-height: 1.5;
                                margin: 0;
                            ">${profile.expertise}</p>
                        </div>
                        
                        <!-- ì„¤ëª… -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="
                                font-size: 13px;
                                font-weight: 600;
                                color: #374151;
                                margin: 0 0 8px 0;
                            ">About</h4>
                            <p style="
                                font-size: 14px;
                                color: #6b7280;
                                line-height: 1.5;
                                margin: 0;
                            ">${profile.description}</p>
                        </div>
                        
                        <!-- ì£¼ìš” ê¸°ëŠ¥ -->
                        <div>
                            <h4 style="
                                font-size: 13px;
                                font-weight: 600;
                                color: #374151;
                                margin: 0 0 12px 0;
                            ">Key Features (MCP)</h4>
                            <div style="
                                background: #f9fafb;
                                border: 1px solid #e5e7eb;
                                border-radius: 8px;
                                padding: 12px;
                            ">
                                <div style="
                                    display: flex;
                                    align-items: center;
                                    font-size: 13px;
                                    color: #374151;
                                    font-weight: 500;
                                ">
                                    <span style="
                                        width: 8px;
                                        height: 8px;
                                        background: #10b981;
                                        border-radius: 50%;
                                        margin-right: 8px;
                                    "></span>
                                    ì‚¬ë‚´ ë¬¸ì„œ RAG
                                </div>
                            </div>
                        </div>
                        
                    </div>
                `;
            }).join('');
            
            profileSection.innerHTML = `
                <div style="text-align: center; margin-bottom: 32px;">
                    <h2 style="
                        font-size: 24px;
                        font-weight: 700;
                        color: #1e293b;
                        margin: 0 0 8px 0;
                    ">ì„ íƒí•˜ì‹  ë©˜í† ë“¤ì„ í™•ì¸í•´ì£¼ì„¸ìš”</h2>
                    <p style="
                        font-size: 14px;
                        color: #64748b;
                        margin: 0;
                    ">ì‹¤ì œ ë©˜í† ë§ì„ ì§„í–‰í•  ë©˜í† ë¥¼ ìµœì¢… ì„ íƒí•˜ì„¸ìš”. ê° ë©˜í† ëŠ” ê´€ë ¨ ë¬¸ì„œë¥¼ í™œìš©í•œ RAG ê¸°ë°˜ ë‹µë³€ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
                </div>
                
                <div style="
                    display: grid;
                    grid-template-columns: repeat(3, 1fr);
                    gap: 20px;
                    margin-bottom: 32px;
                ">
                    ${profileCards}
                </div>
                
                <div style="text-align: center; margin-top: 32px;">
                    <button id="finalStartBtn" onclick="startFinalMentoring()" style="
                        background: linear-gradient(135deg, #10b981, #059669);
                        color: white;
                        border: none;
                        padding: 16px 32px;
                        border-radius: 12px;
                        font-size: 16px;
                        font-weight: 600;
                        cursor: pointer;
                        transition: transform 0.2s;
                        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
                    " onmouseover="this.style.transform='scale(1.05)'" 
                       onmouseout="this.style.transform='scale(1)'">
                        <i class="fas fa-rocket" style="margin-right: 8px;"></i>
                        ë©˜í† ë§ ì‹œì‘í•˜ê¸°
                    </button>
                </div>
            `;
            
            // ë©˜í†  ì½˜í…ì¸  ë‹¤ìŒì— í”„ë¡œí•„ ì„¹ì…˜ ì¶”ê°€
            const mentorContent = document.getElementById('mentorContent');
            if (mentorContent && mentorContent.parentNode) {
                mentorContent.parentNode.insertBefore(profileSection, mentorContent.nextSibling);
            }
        }

        // ìµœì¢… ë©˜í†  ì„ íƒ í† ê¸€
        let finalSelectedMentors = [...selectedMentors]; // ì´ˆê¸°ê°’ì€ ì„ íƒëœ ëª¨ë“  ë©˜í† 
        
        function toggleFinalMentorSelection(mentorType) {
            const checkbox = document.getElementById(`final-select-${mentorType}`);
            if (checkbox.checked) {
                if (!finalSelectedMentors.includes(mentorType)) {
                    finalSelectedMentors.push(mentorType);
                }
            } else {
                finalSelectedMentors = finalSelectedMentors.filter(m => m !== mentorType);
            }
            
            updateFinalStartButton();
        }
        
        function updateFinalStartButton() {
            const btn = document.getElementById('finalStartBtn');
            if (!btn) return;
            
            if (finalSelectedMentors.length > 0) {
                btn.style.opacity = '1';
                btn.style.pointerEvents = 'auto';
                btn.disabled = false;
                btn.innerHTML = `
                    <i class="fas fa-rocket" style="margin-right: 8px;"></i>
                    ${finalSelectedMentors.length}ëª…ì˜ ë©˜í† ì™€ ì‹œì‘í•˜ê¸°
                `;
            } else {
                btn.style.opacity = '0.5';
                btn.style.pointerEvents = 'none';
                btn.disabled = true;
                btn.innerHTML = `
                    <i class="fas fa-rocket" style="margin-right: 8px;"></i>
                    ë©˜í† ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”
                `;
            }
        }
        
        // ìµœì¢… ë©˜í† ë§ ì‹œì‘
        function startFinalMentoring() {
            if (finalSelectedMentors.length === 0) return;
            
            showNotification(`ì„ íƒëœ ${finalSelectedMentors.length}ëª…ì˜ ë©˜í† ì™€ í•¨ê»˜ ë©˜í† ë§ì„ ì‹œì‘í•©ë‹ˆë‹¤!`, 'success');
            
            // ì„ íƒëœ ë©˜í†  ì •ë³´ë¥¼ ì €ì¥
            localStorage.setItem('selectedMentors', JSON.stringify(finalSelectedMentors));
            
            // ì±„íŒ… í˜ì´ì§€ë¡œ ì´ë™
            setTimeout(() => {
                switchToTab('chat');
                // ìƒì„¸ í”„ë¡œí•„ ì„¹ì…˜ ì œê±°
                const profileSection = document.getElementById('mentorProfileSection');
                if (profileSection) {
                    profileSection.remove();
                }
            }, 1000);
        }

        // ëŒ€í™” ì´ˆê¸°í™”
        async function clearChat() {
            try {
                const response = await fetch('/clear-chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'include' // ì¿ í‚¤ í¬í•¨
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // ì±„íŒ… ë©”ì‹œì§€ í™”ë©´ ì´ˆê¸°í™”
                    const chatMessages = document.getElementById('chatMessages');
                    // í˜„ì¬ ëª¨ë“œì— ë”°ë¼ ì´ˆê¸° ë©”ì‹œì§€ ì„¤ì •
                    const activeTab = document.querySelector('.nav-link.active').dataset.page;
                    const initialMsg = activeTab === 'profile' 
                        ? 'ì•ˆë…•í•˜ì„¸ìš”! ì‚¬ë‚´ ì§€ì‹ì´ í’ë¶€í•œ ì „ë¬¸ë¶„ì•¼ë³„ AI ë©˜í† ë“¤ì´ ì—¬ëŸ¬ë¶„ì˜ ì§ˆë¬¸ì— ë‹µë³€í•´ë“œë¦½ë‹ˆë‹¤. ê¶ê¸ˆí•œ ë¶„ì•¼ë‚˜ ì£¼ì œë¥¼ ë§ì”€í•´ì£¼ì‹œë©´, í•´ë‹¹ ì˜ì—­ì˜ ë©˜í† ë“¤ì´ ê°ìì˜ ì „ë¬¸ì„±ì„ ì‚´ë ¤ ë„ì›€ì„ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.'
                        : 'ì•ˆë…•í•˜ì„¸ìš”! LearningMateì˜ í•™ìŠµ ë©˜í† ì…ë‹ˆë‹¤. ì–´ë–¤ ì£¼ì œì— ëŒ€í•´ ë°°ìš°ê³  ì‹¶ìœ¼ì‹ ì§€ ì•Œë ¤ì£¼ì„¸ìš”. ë§ì¶¤í˜• í•™ìŠµ ê³„íšì„ í•¨ê»˜ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.';
                    
                    chatMessages.innerHTML = `
                        <div class="message ai-message">
                            <div class="message-avatar ai-avatar-small">AI</div>
                            <div class="message-content" id="initialMessage">
                                ${initialMsg}
                            </div>
                        </div>
                    `;
                    
                    // í”„ë¡œí•„ê³¼ ì»¤ë¦¬í˜ëŸ¼ ë°ì´í„° ì´ˆê¸°í™”
                    updateLearningProfile('', '', '');
                    localStorage.removeItem('currentProfile');
                    localStorage.removeItem('generatedCurriculum');
                    localStorage.removeItem('curriculumProgress'); // ì§„í–‰ë„ë„ ì´ˆê¸°í™”
                    // ìƒì„± ìƒíƒœ ì´ˆê¸°í™”
                    isGeneratingCurriculum = false;
                    
                    // ì»¤ë¦¬í˜ëŸ¼ í˜ì´ì§€ê°€ í™œì„±í™”ë˜ì–´ ìˆë‹¤ë©´ ìƒˆë¡œê³ ì¹¨
                    const curriculumContent = document.getElementById('curriculumContent');
                    if (curriculumContent && curriculumContent.style.display === 'block') {
                        showCurriculumContent(curriculumContent);
                    }
                    
                    showNotification('ëŒ€í™”ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤');
                } else {
                    showNotification('ëŒ€í™” ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤', 'error');
                }
            } catch (error) {
                showNotification(`ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }
    </script>
</body>
</html>
